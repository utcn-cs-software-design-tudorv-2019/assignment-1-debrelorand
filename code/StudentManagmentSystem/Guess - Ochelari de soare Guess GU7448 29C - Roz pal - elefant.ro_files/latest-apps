/*
 Â© 2014 Second Street, MIT License <http://opensource.org/licenses/MIT>
 Talker.js 1.0.1 <http://github.com/secondstreet/talker.js>
*/
var Antavo={};
(function(){function c(b,h){"function"!=typeof Object.assign&&(Object.assign=function(b){if(null==b)throw new TypeError("Cannot convert undefined or null to object");b=Object(b);for(var f=1;f<arguments.length;f++){var l=arguments[f];if(null!=l)for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(b[e]=l[e])}return b});h=Object.assign({},h);if(null===h||void 0===h||h===b)return b;if(null===b||void 0===b)return h;for(var e in b)b.hasOwnProperty(e)&&(h[e]=null===b[e]?b[e]:"object"!==typeof b[e]||
b[e]instanceof Date||b[e]instanceof Array?b[e]:c(b[e],h[e]));return h}function r(b,h){var e=[],k;for(k in b)if(b.hasOwnProperty(k)){var f=h?h+"["+k+"]":k;var l=b[k];e.push("object"==typeof l?r(l,f):m(f)+"="+m(l))}return e.join("&")}var m=encodeURIComponent;Antavo.isIE=function(){return-1!=navigator.userAgent.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/")};Antavo.isEdge=function(){return 0<navigator.appVersion.indexOf("Edge")};Antavo.serialize=r;Antavo.isMobile=function(){return{Android:function(){return navigator.userAgent.match(/Android/i)},
BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}}};Antavo.merge=c})();Antavo=window.Antavo||{};
(function(c){function r(b,h){return(b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector).call(b,h)}var m=encodeURIComponent;Antavo.DOM={};Antavo.DOM.closest=function(b,h,e){if(b&&b.nodeType)for(;b;)if(b.nodeType!=Node.DOCUMENT_NODE&&b.nodeType!=Node.DOCUMENT_FRAGMENT_NODE){if(r(b,h))return b;if(b==e)break;else b=b.parentNode}else break;return null};Antavo.DOM.fromString=function(b){var h=c.createElement("div"),e=c.createDocumentFragment();
for(h.innerHTML=b;b=h.firstChild;)e.appendChild(b);return e};Antavo.DOM.hasClass=function(b,h){return b.classList?b.classList.contains(h):(new RegExp("(^| )"+h+"( |$)","gi")).test(b.className)};Antavo.DOM.matches=r;Antavo.DOM.serializeForm=function(b){if(b instanceof HTMLFormElement){var h=[];b=b.elements;for(var e=0,k=b.length;e<k;e++){var f=b[e];if(f.name&&!f.getAttribute("disabled")&&("radio"!=f.type&&"checkbox"!=f.type||f.checked))if("select-multiple"==f.type)for(var l=0;l<f.options.length;l++)f.options[l].selected&&
h.push(m(f.name)+"="+m(f.options[l].value));else h.push(m(f.name)+"="+m(f.value))}return h.join("&")}return""};Antavo.DOM.insertAfter=function(b,h){return h.parentNode.insertBefore(b,h.nextSibling)}})(document);Antavo=window.Antavo||{};
Antavo.URL=function(c){function r(b){var f="",e,k=0;for(e in b)b.hasOwnProperty(e)&&(f+=(k++?"&":"")+h(e)+"="+h(b[e]));return f}function m(e){var f={};e=e.split("&");var l=e.length,h;for(h=0;h<l;h++)if(e[h]){var k=e[h].split("=");f[b(k[0])]=b(k[1])}return f}var b=decodeURIComponent,h=encodeURIComponent,e=document.createElement("A");e.href=c;this.source=c.toString();this.protocol=e.protocol.replace(":","");this.host=e.hostname?e.hostname:location.hostname;this.port=e.port;this.query=e.search;this.params=
m(e.search.replace(/^\?/,""));this.file=(e.pathname.match(/\/([^\/?#]+)$/i)||["",""])[1];this.hash=e.hash.replace("#","");this.path=e.pathname.replace(/^([^\/])/,"/$1");this.relative=(e.href.match(/tps?:\/\/[^\/]+(.+)/)||["",""])[1];this.segments=e.pathname.replace(/^\//,"").split("/");this.toString=function(){var b=r(this.params);return(this.protocol?this.protocol+"://":"//")+this.host+(this.port?":"+this.port:"")+this.path+(b?"?"+b:"")+(this.hash?"#"+this.hash:"")};this.parseQuery=m;Antavo.URL.buildQuery=
r;Antavo.URL.parseQuery=m};Antavo=window.Antavo||{};
Antavo.Event=function(c,r){function m(k){var f=h.indexOf(this),l;if(-1!=f&&e[f]&&(l=e[f][k.type]))for(var c in l)if(l.hasOwnProperty(c))for(f=k.target;f=b(f,c,this);){for(var m=0,y=l[c].length;m<y&&!1!==l[c][m].call(f,k);m++);f=f.parentNode}}var b=c.DOM.closest,h=[],e=[];return{bind:function(b,f,l,c){c||(c=r);if(c.nodeType&&"function"==typeof l){var k=h.indexOf(c);-1==k&&(k=h.push(c),e[--k]={});e[k][b]||(e[k][b]={},c.addEventListener(b,m));e[k][b][f]||(e[k][b][f]=[]);e[k][b][f].push(l);return!0}return!1},
trigger:function(b,f,e){if(b){if(c.isIE()){var h=r.createEvent("CustomEvent");h.initCustomEvent(f,!0,!0,e)}else h=new CustomEvent(f,{bubbles:!0,cancelable:!0,detail:e});return b.dispatchEvent(h)}},unbind:function(){return!1}}}(Antavo,document);Antavo=window.Antavo||{};
Antavo.AJAX=function(c){function r(b){return-1<b.getResponseHeader("Content-Type").indexOf("application/json")}function m(b,e,h){if(window.XMLHttpRequest)var f=new XMLHttpRequest;else if(window.ActiveXObject)f=new ActiveXObject("Microsoft.XMLHTTP");else throw Error("No XMLHttpRequest object found!");f.open(b,e,!0);h||f.setRequestHeader("X-Requested-With","XMLHttpRequest");return f}function b(b,e,c,k,m){return h("POST",b,e,c,k,m)}function h(b,h,z,w,y,u,n){"string"==typeof z||z instanceof FormData||
(z=c.serialize(z));z&&"GET"==b.toUpperCase()&&(h+=(-1==h.indexOf("?")?"?":"&")+z,z=null);b=m(b,h,n);b.onreadystatechange=function(){switch(this.readyState){case this.OPENED:u&&k.trigger(u,"antavo_ajax_loading",this);break;case this.HEADERS_RECEIVED:r(this)&&(this.responseType="json");break;case this.DONE:var b=this.response;b&&c.isIE()&&r(this)&&(b=JSON.parse(b));u&&k.trigger(u,"antavo_ajax_completed",this);200==this.status?b&&b.error?e(this,b,y,u):(u&&k.trigger(u,"antavo_ajax_success",b),"function"==
typeof w&&w.call(u||window,b)):e(this,b,y,u)}};!z||z instanceof FormData||b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");u&&k.trigger(u,"antavo_ajax_before_send",b);b.send(z);u&&k.trigger(u,"antavo_ajax_sent",b);return b}function e(b,e,h,c){c&&k.trigger(c,"antavo_ajax_error",b);"function"==typeof h&&h.call(c||window,b,e)}var k=c.Event;return{get:function(b,e,c,k,m){return h("GET",b,null,e,c,k,m)},post:b,send:h,submit:function(b,e,m,w){b.preventDefault();w=w||b.target;k.trigger(w,
"antavo_ajax_submitted");return h(b.target.method||"GET",b.target.getAttribute("action")||"",c.DOM.serializeForm(b.target),e,m,w)},errorHandler:function(e,h,c){/script error/i.test(e)||b("https://push.antavo.com/js",{message:e,file:h,line:c})},SUBMITTED:"antavo_ajax_submitted",BEFORE_SEND:"antavo_ajax_before_send",SENT:"antavo_ajax_sent",LOADING:"antavo_ajax_loading",COMPLETED:"antavo_ajax_completed",SUCCESS:"antavo_ajax_success",ERROR:"antavo_ajax_error"}}(Antavo);Antavo=window.Antavo||{};
Antavo=window.Antavo||{};
Antavo.Cookie=function(c){function r(h,e,c,f,l){h=m(h)+"="+m(e);c?(e=new Date,"number"===typeof c?c=Infinity===c?b.expires:new Date(e.getTime()+1E3*c):"string"===typeof c&&(c=new Date(c)),c="; expires="+c.toUTCString()):c="";document.cookie=h+c+"; path="+(f?f:b.path)+(l?"; domain ="+l:"")}var m=encodeURIComponent,b={path:"/",expires:new Date("Fri, 31 Dec 9999 23:59:59 UTC")};return{get:function(b){b=(document.cookie.match("(^|;\\s*)"+m(b)+"=([^;]*)")||0)[2];return void 0!==b?decodeURIComponent(b):
void 0},set:r,expire:function(b,e,c,f){r(b,e,"Thu, 01 Jan 1970 00:00:00 GMT",c?c:!1,f?f:!1)}}}(Antavo);Antavo=window.Antavo||{};
Antavo.Template=function(c){function r(c,b,h,e){var k=h+"foreach\\s+(\\w+)"+e+"([\\s\\S]+)"+h+"endforeach"+e,f=c.match(new RegExp(k,"g")),l;if(f)for(l in f){var m=f[l].match(new RegExp(k)),w=b[m[1]],y="";if(w)for(var u in w)y+=r(m[2],w[u],h,e);c=c.replace(f[l],y)}for(l in b)c=c.replace(new RegExp(h+l+e,"g"),b[l]);return c}this.replace=function(c){return this.content=r(this.content,c,this.leftDelimiter,this.rightDelimiter)};this.leftDelimiter="{{";this.rightDelimiter="}}";this.content=function(c){if(c.nodeType==
Node.DOCUMENT_NODE||c.nodeType==Node.DOCUMENT_FRAGMENT_NODE){var b=document.createElement("div");b.appendChild(c);return b.innerHTML}return c.innerHTML||c.toString&&c.toString()}(c)};Antavo=window.Antavo||{};
(function(c){function r(a){T&&WebSocket.OPEN==T.readyState?T.send(JSON.stringify(a)):Q.push(a)}function m(){T&&T.close()}function b(){"undefined"!=typeof Antavo.Widget?(Antavo.Widget.isReady()||Antavo.Widget.setTemplate(K.widget.template),Antavo.Widget.isReady()&&Antavo.SDK.isReady()&&Antavo.Event.trigger(c,G.SDK_INIT_FINISHED,{})):Antavo.SDK.isReady()&&Antavo.Event.trigger(c,G.SDK_INIT_FINISHED,{})}function h(){var a="//api-apps.antavo.com/auth?api_key="+H;K&&K.locale&&null!=K.locale&&(a+="&locale="+
K.locale);B&&""!=B&&(a+="&customer="+B);Antavo.AJAX.get(a,function(a){var d=!0;if(0<a.length){for(var g=0;g<a.length;g++)k(a[g]),"customer"===a[g].type&&(d=!1);d&&(Antavo.Event.trigger(c,G.SDK_AUTH_NO_CUSTOMER,{}),N&&P&&"customer"===P&&N.call(window))}else k(a);if(0<V.length)for(a=0;a<V.length;a++)V.splice(0,1)[0].call()})}function e(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,R.groupSeparator||"")}function k(b){switch(b.type){case "brand":var I=b.data;var p=f;d=I.facebook_app_id?I.facebook_app_id:
"697644286957410";I.extensions.socialaccounts&&I.extensions.socialaccounts.facebook_api_key&&(d=I.extensions.socialaccounts.facebook_api_key+"");D=I.id;a=I.urls.loyalty;v=I.urls.events;L=I.urls.cdn;g=I.apps_url;E=I.urls.events;U=I.urls.reviews;F=I.urls.login;R=I.l10n.messages;O=I.extensions;V.push(n);N&&P&&"brand"===P&&N.call(window);for("function"===typeof p&&p.call(window);I=Q.shift();)r(I);"undefined"!=typeof Antavo.Widget&&b.data.widget&&K.notifications&&(M=!0,I=Antavo.Cookie.get("__alo"),Antavo.Widget.setOptions(b.data.widget),
Antavo.Widget.positionWidget(),Antavo.Widget.storeLotteryResult(),I&&"2"==I&&(Antavo.Cookie.expire("__alo",I,"/",q()),Antavo.Cookie.set("__alo","3",1E22,"/",q()),Antavo.Widget.openSidebar()));break;case "activity":"undefined"!=typeof Antavo.Toast&&K.notifications&&"active"==C.status?(Antavo.Event.trigger(c,G.SHOW_NOTIFICATION,b),"undefined"!=typeof MicrositeHelper&&MicrositeHelper.flipCardBack(b.data.activity)):console.info("Got opted-out customer, no notifications or points.");break;case "customer":b.data.promo_url=
b.url;C=b.data;I=b.data;"undefined"!=typeof I&&I.hasOwnProperty("experiment_group")&&((p=Antavo.Cookie.get("__alg"))&&Antavo.Cookie.expire("__alg",p,"/",q()),I.hasOwnProperty("status")&&"inactive"===I.status||Antavo.Cookie.set("__alg",I.experiment_group,2592E3,"/",q()));u(b.data);"undefined"==typeof Antavo.Widget||Antavo.SDK.getExtensionInfo("contentconsumption")||Antavo.Widget.update(b.data);"undefined"!=typeof Antavo.Automation&&"active"==C.status?Antavo.Automation.updatePoints(e(parseInt(b.data.score)-
parseInt(b.data.spent))):console.info("Got opted-out customer, no notifications or points.");break;case "action":l(b);break;case "hash":b.id&&b.data&&(I=X[b.id],I.hash=b.data.hash,I.date=b.data.date,Antavo.AJAX.post(E,I,w,y),delete X[b.id]);break;case "debug":console.info(b.data);break;case "error":console.error(b.data.message)}}function f(){for(var a in O)O.hasOwnProperty(a)&&("toast"==a?Antavo.PollToast.init():"incentivizedpurchase"==a&&t("campaigns")?Antavo.IncentivizedPurchase.init():"campaigns"==
a?Antavo.Campaigns.init():window===top&&"ziggy"===a&&function(){var a=c.createElement("script"),d=c.getElementsByTagName("script")[0];a.type="text/javascript";a.async=!0;a.defer=!0;a.src="//ziggy.antavo.com/ziggy.js";d.parentNode.insertBefore(a,d);a.onload=function(){var a=O.ziggy,d={c:Antavo.SDK.getBrandId(),auth:Antavo.SDK.getCustomer()?1:0};a.stardust&&"rise"===a.stardust&&Antavo.SDK.getCustomerId()&&(d.d=Antavo.SDK.getCustomerId());window.Ziggy.init(d)}}())}function l(a){"undefined"!=typeof Antavo.Automation&&
"undefined"!=typeof Antavo.Toast&&K.notifications&&"active"==C.status&&(Antavo.Automation.updateLimitPoints(a.data.points),Antavo.Event.trigger(c,G.SHOW_NOTIFICATION,a))}function z(a,d,g){(B||g)&&Antavo.AJAX.post(E,{api_key:H,customer:g||B,action:a,data:d||{}},w,y)}function w(a){a.id==B&&a.events instanceof Array&&a.events.forEach(function(a){l({id:a.id,data:{points:a.points}})})}function y(a,d){d.error?console.info("Got "+d.error.type+": "+d.error.message):console.info(d)}function u(a){if(D){var d=
Antavo.Cookie.get("__alc");var g=q();"cookie"==K.auth.method&&K.auth.cookie&&a.autologin_token&&(B?d&&a.autologin_token==d||Antavo.Cookie.set("__alc",a.autologin_token,2700,"/",g):d&&Antavo.Cookie.expire("__alc",d?d:"","/",g));"social"==K.auth.method&&a.autologin_token&&(B?d&&a.autologin_token==d||Antavo.Cookie.set("__alc",a.autologin_token,7200,"/",g):d&&Antavo.Cookie.expire("__alc",d?d:"","/",g));Antavo.Automation.hasCustomerHash()||Antavo.Automation.setCustomerHash();N&&P&&"customer"===P&&N.call(window);
Antavo.Event.trigger(c,G.SDK_AUTH_FINISHED,{})}else setTimeout(function(){u(a)},500)}function n(){if("social"!=K.auth.method||B||0!=p)B||0!=p||(a=Antavo.Cookie.get("__alc"),Antavo.Cookie.expire("__alc",a?a:"","/",q()));else{var a=Antavo.Cookie.get("__alc");a?(a=a.split(".")[1],a=window.atob(a),B=JSON.parse(a).customer):B=null;h();p=!0}}function q(){return-1<location.hostname.indexOf(".co.uk")||-1<location.hostname.indexOf(".co.nl")?location.hostname.split(".").slice(-3).join("."):location.hostname.split(".").slice(-2).join(".")}
function t(a){for(var d=O,g=0;g<arguments.length;g++)if(d.hasOwnProperty(arguments[g]))d=d[arguments[g]];else return!1;return d}function A(){if(D){var a=c.createElement("link"),d=c.getElementsByTagName("link")[0];c.getElementById("antavo_loyalty_helper_css")||(a.setAttribute("href",L+"/css/loyalty/helper.css"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("id","antavo_loyalty_helper_css"),"undefined"!=typeof d&&d?d.parentNode.insertBefore(a,d):c.querySelector("head").appendChild(a))}else setTimeout(A,
500)}var H,B,C,D,a,d,v,g,L,U,F,E="//api-apps.antavo.com/events",M=!1,S=!1,N,P,p=!1,K,W={auth:{cookie:!0,method:"cookie"},video:{enabled:!0},social:{enabled:!0,disableTracking:!1},widget:{enabled:!1,template:null,quiz:!0,position:"right"},tracking:{autoSend:!1,setHash:!0,hashMethod:"hash"},socialShare:{enabled:!0},notifications:!0,locale:null},O,V=[],G={SDK_INIT_START:"antavo_sdk_init_start",SDK_INIT_FINISHED:"antavo_sdk_init_finished",SDK_INIT_ERROR:"antavo_sdk_init_error",SDK_AUTH_FINISHED:"antavo_sdk_customer_authenticated",
SDK_AUTH_NO_CUSTOMER:"antavo_sdk_customer_not_authenticated",MESSAGE_RECEIVED:"antavo_sdk_message_received",SHOW_NOTIFICATION:"antavo_sdk_show_notification",NOTIFICATION_SHOWN:"antavo_sdk_notification_shown"},R={decimalSeparator:".",groupSeparator:","},T,Q=[],X={};(function(){var a=1;return function(){return a++}})();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");
for(var d=Object(a),g=1;g<arguments.length;g++){var b=arguments[g];if(void 0!==b&&null!==b){b=Object(b);for(var v=Object.keys(Object(b)),Q=0,n=v.length;n>Q;Q++){var c=v[Q],q=Object.getOwnPropertyDescriptor(b,c);void 0!==q&&q.enumerable&&(d[c]=b[c])}}}return d}});var J={getAPIKey:function(){return H},getAPIUrl:function(){return v},getCustomerId:function(){return B},getCustomerLevel:function(){return C?C.level:null},getEndpoint:function(){return E},getApiHost:function(){return"//api-apps.antavo.com"},getImageUrl:function(){return C&&
C.image_url||"https://cdn3.antavo.com/img/loyalty/anonymous.png"},init:function(a,d,g,v,Q){var n={};Q=Q||"init";K=Antavo.merge(g,W);H=a;"cookie"===K.auth.method&&(B=d);a&&""!=a&&(h(),c.addEventListener(G.NOTIFICATION_SHOWN,function(a){a.detail.id&&r({type:"delivered",id:a.detail.id})}),window.addEventListener("beforeunload",m));void 0!==Antavo.Toast&&Antavo.Toast.setEventHandlers();void 0!==K.video&&K.video.enabled&&Antavo.Video.init();S=!0;A();b();v&&"[object Function]"===n.toString.call(v)&&("init"==
Q?v.call(window):(N=v,P=Q));return Antavo.SDK}};J.send=z;J.sendVisit=function(a){a=Antavo.URL(a);delete a.params.__al;a.hash=null;z("visit",{url:a.toString()},B);"undefined"!==typeof Antavo.Automation&&Antavo.Automation.setEventSent()};J.getCredentials=function(){return H+" "+B};J.getBrand=function(){return{id:D,url:a}};J.getBrandUrl=function(){return a};J.getBrandId=function(){return D};J.sendInitEvent=b;J.isReady=function(){return S};J.getKey=function(a,d){return R&&R.hasOwnProperty(a)?R[a]:d||
!1};J.getCustomer=function(){return C};J.setCustomerProperty=function(a,d){return C[a]=d};J.getCDNUrl=function(){return L};J.getFacebookAppId=function(){return d};J.getAppsUrl=function(){return g};J.getReviewsUrl=function(){return U};J.getLoginUrl=function(){return F};J.getOption=function(a){for(var d=K,g=0;g<arguments.length;g++)if(d.hasOwnProperty(arguments[g]))d=d[arguments[g]];else return!1;return d};J.getTopDomain=q;J.setOptinCookie=function(a){if(!Antavo.Cookie.get("__alo"))return Antavo.Cookie.set("__alo",
"1",0,"/",q()),ga&&ga("send","event","user-interactions","opt-in-initiated",D,1),a&&(window.top.location.href=a),!0;a&&(window.top.location.href=a);return!1};J.getVisitor=function(){return Antavo.Cookie.get("_ga")};J.injectStyleSheet=A;J.formatNumber=e;J.isWidgetEnabled=function(){return M};J.handleActionMessage=l;J.getExtensionInfo=t;J.events=G;Antavo.SDK=J})(document);Antavo=window.Antavo||{};
Antavo.Video=function(c){function r(a){if("undefined"===typeof window.onYouTubeIframeAPIReady&&a){a=document.createElement("script");var d=document.getElementsByTagName("script")[0];a.src="https://www.youtube.com/iframe_api";d.parentNode.insertBefore(a,d);window.onYouTubeIframeAPIReady=function(){[].forEach.call(document.querySelectorAll('[src*="youtube.com"]:not(script),[src*="youtu.be"]:not(script)'),function(a){var d=a.getAttribute("src");/enablejsapi=1/.test(a.src)||a.setAttribute("src",d+(-1==
d.indexOf("?")?"?":"&")+"enablejsapi=1");m(a)})}}}function m(a){var d=a.hasAttribute("id")?a.getAttribute("id"):n();a.getAttribute("id")===d?"":a.setAttribute("id",d);p[d]={type:"youtube",total:0,played:0,counter:0,percent_to_watch:50,pointsValue:0,url:"",quizUrl:"",sent:!1,playerObj:new YT.Player(d,{events:{onReady:b,onStateChange:h}}),was_correct:!1,available:null,watched:!0}}function b(a){var d=p[a.target.getIframe().getAttribute("id")],g=-1,b=function(){if(-1!==g&&a.target.getPlayerState()===
YT.PlayerState.PLAYING){var d=a.target.getCurrentTime();1<Math.abs(d-g-1)&&p[a.target.getIframe().getAttribute("id")].played--}g=a.target.getCurrentTime();setTimeout(b,1E3)};setTimeout(b,1E3);d.total=a.target.getDuration();G||"undefined"!==typeof Antavo.SDK&&H(a,p,a.target.getIframe().getAttribute("id"));window.addEventListener("scroll",function(a){D()})}function h(a){if(YT.PlayerState.ENDED===a.data){var d=a.target.getIframe().getAttribute("id");W?(C(),Antavo.Event.trigger(document,V.VIDEO_END,[])):
(Antavo.SDK.send("video",{type:"youtube",url:a.target.getVideoUrl(),id:a.target.getVideoData().video_id,title:a.target.getVideoData().title}),C());O&&null==p[a.target.getIframe().getAttribute("id")].was_correct&&3>=p[d].total-p[d].played&&(Antavo.SDK.getExtensionInfo("contentconsumption")?M(p[d].quizUrl):S(d,p[d].quizUrl));C()}else if(YT.PlayerState.PLAYING===a.data){var g=a.target.getIframe().getAttribute("id"),b=Date.now(),v=-1;""===p[g].url&&(p[a.target.getIframe().getAttribute("id")].url=a.target.getVideoUrl());
p[g].video_id=a.target.getVideoData().video_id;p[g].counter=setInterval(function(){var a=Math.floor((Date.now()-b)/1E3);1<=a-v&&(p[g].played++,W&&p[g].pointsValue&&0<p[g].pointsValue&&z(p[g].percent_to_watch/100*p[g].total-p[g].played,g));v=a},250)}else YT.PlayerState.PAUSED===a.data&&(setTimeout(D,3E3),clearInterval(p[a.target.getIframe().getAttribute("id")].counter))}function e(a){var d=document.createElement("script"),g=document.getElementsByTagName("script")[0];a&&(d.src="https://cdn.antavo.com/lib/bower-froogaloop/froogaloop.min.js",
g.parentNode.insertBefore(d,g),d.onload=function(){[].forEach.call(document.querySelectorAll('[src*="vimeo.com"]:not(script)'),function(a){k(a)})})}function k(a){var d=a.hasAttribute("id")?a.getAttribute("id"):n(),g=t(a.src,0),b=t(a.src,3);a.setAttribute("src",A(a,d));a.hasAttribute("id")?"":a.setAttribute("id",d);p[d]={type:"vimeo",total:0,played:0,pointsValue:0,percent_to_watch:50,progress:[],url:"",quizUrl:"",src:g,id:b,watched:!0,was_correct:null,available:null,playerObj:$f(a).addEvent("ready",
function(g){$f(a).api("getVideoUrl",function(g){p[d].url=g;null!==p[d].url||t(a.src,0);"undefined"!==typeof Antavo.SDK&&H(a,p,d)});0>=p[d].url.length&&(g=new Antavo.URL(a.src),p[d].url=g.protocol+"://"+g.host+g.path,"undefined"!==typeof Antavo.SDK&&H(a,p,d));window.addEventListener("scroll",function(a){D()});$f(a).addEvent("playProgress",function(g){f(g,d);$f(a).api("getVideoUrl",function(a){p[d].url=a})});$f(a).addEvent("pause",function(a){setTimeout(D,3E3)});$f(a).addEvent("finish",function(a){W?
Antavo.Event.trigger(document,V.VIDEO_END,[]):Antavo.SDK.send("video",{type:"vimeo",url:p[d].url});O&&null==p[d].was_correct&&9<p[d].played&&(Antavo.SDK.getExtensionInfo("contentconsumption")?M(p[d].quizUrl):S(d,p[d].quizUrl))})})}}function f(a,d){var g=1E3*a.percent,b=p[d].total;p[d].progress?(100>b&&(b+=200),-1===p[d].progress.indexOf(g)&&(p[d].total=a.duration,p[d].progress.push(g),p[d].played=parseInt(b/1E3*p[d].progress.length),W&&p[d].pointsValue&&0<p[d].pointsValue&&z(p[d].percent_to_watch/
100*p[d].total-p[d].played,d))):(p[d].progress=[],p[d].total=a.duration,p[d].played=0)}function l(a,d){var g=(window.parent.document.getElementById("tpl-video-frame")?window.parent:window).document.getElementById("tpl-video-frame");g=P()?new Antavo.Template(g.cloneNode(!0)):new Antavo.Template(g.content.cloneNode(!0));var b=F(),v=(new Date).getTime(),n={};n.content="vimeo"===a?'<iframe id="apf'+v+'" src="https://player.vimeo.com/video/'+d+"?api=1&title=0&autoplay=1&player_id=apf"+v+'" width="500" height="209" frameborder="0" autoplay="1" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':
'<iframe id="apf'+v+'" width="560" height="315" src="https://www.youtube.com/embed/'+d+'?enablejsapi=1&autoplay=1&autohide=1" frameborder="0" allowfullscreen></iframe>';"undefined"!==typeof Antavo.SDK&&Antavo.SDK.injectStyleSheet();b.innerHTML=g.replace(n);"vimeo"===a?k(b.querySelector("#apf"+v)):m(b.querySelector("#apf"+v))}function z(a,b){var n=G?self:window.parent,c=RegExp("(video-[w]*)","g"),e=n.document.querySelector(".remaining-box"),f="",t="",h="";t=n.document.getElementById("antavo-loyalty-video-dialog");
f="undefined"!==typeof Antavo.SDK?Antavo.SDK.getCustomer():G;n=n.document.querySelector('iframe[id="'+b+'"]');h=O&&null!=p[b].quizUrl;R?e.classList.add("loyalty-apps"):e.classList.remove("loyalty-apps");e.className.replace(c,"");e.classList.add("video-"+b);if("undefined"==typeof f||!p[b].watched&&!f.limit||G)if(!e&&!t&&0<a)e=U(),v(n);else if(e&&h&&1==p[b].was_correct)c="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_video_already_watched")?Antavo.SDK.getKey("lm_video_already_watched"):"You already got points for this video!",
v(n),L("successfull"),g(".success-wrapper",'<div class="success-wrapper"><p>'+c+"</p></div>");else if(e&&h&&0==p[b].was_correct&&null!=p[b].available)if(e=parseInt((new Date).getTime()/1E3),a=Math.ceil((new Date(p[b].available)).getTime()-e),0<a)f=0>=parseInt(a/3600)?"":parseInt(a/3600)+":",t=0>=!parseInt(a/3600)&&9>=parseInt(a/60)%60?"0"+parseInt(a/60)%60:parseInt(a/60)%60,h=9>=parseInt(a%60)?"0"+parseInt(a%60):parseInt(a%60),v(n),g(q(f,t,h,b));else{c="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_video_take_quiz_now")?
Antavo.SDK.getKey("lm_watch_video_now"):'You can take our quiz about this video <button data-open-widget href="%s">now</button>';var C;t=G||Antavo.SDK.getCustomer();e=G?G.image_url:Antavo.SDK.getImageUrl();f=document.querySelector("#remaining-box-image");t=G?G.first_name:t.handler;v(n);L("loggedin");c.match("%s")?g("#remaining-time","<p>"+c.replace(/(%s)/gmi,p[b].quizUrl)+"</p>"):g("#remaining-time","<p>"+c+"</p>");g("#remaining-box-name",t);g("#remaining-box-point-value",p[b].pointsValue);f?f.setAttribute("src",
e):"";(C=document.querySelector(".remaining-box p button[data-open-widget]"))&&C.addEventListener("click",function(a){a.preventDefault();Antavo.Widget.openSidebar(C.getAttribute("href"))})}else e&&h&&p[b].watched?(c="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_video_take_quiz_now")?Antavo.SDK.getKey("lm_watch_video_now"):'You can take our quiz about this video <button data-open-widget href="%s">now</button>',t=G||Antavo.SDK.getCustomer(),e=G?G.image_url:Antavo.SDK.getImageUrl(),f=document.querySelector("#remaining-box-image"),
v(n),L("loggedin"),c.match("%s")?g("#remaining-time","<p>"+c.replace(/(%s)/gmi,p[b].quizUrl)+"</p>"):g("#remaining-time","<p>"+c+"</p>"),g("#remaining-box-name",t.handler),g("#remaining-box-point-value",p[b].pointsValue),f?f.setAttribute("src",e):"",(C=document.querySelector(".remaining-box p button[data-open-widget]"))&&C.addEventListener("click",function(a){a.preventDefault();Antavo.Widget.openSidebar(C.getAttribute("href"))})):1<a?(f=0>=parseInt(a/3600)?"":parseInt(a/3600)+":",t=parseInt(a/60),
h=9>=parseInt(a%60)?"0"+parseInt(a%60):parseInt(a%60),v(n),g(q(f,t,h,b))):e&&("undefined"!=typeof Antavo.SDK&&"undefined"!=typeof Antavo.SDK.getCustomer()&&Antavo.SDK.getBrandId()||G?(c="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_finished_video_label")?Antavo.SDK.getKey("lm_finished_video_label"):"Congratulations!",e=document.querySelector(".remaining-box"),"none"!=window.getComputedStyle.display&&"undefined"!=typeof e&&"none"!=e.style.display&&(v(n),L("successfull"),g(".success-wrapper",
'<div class="success-wrapper"><p>'+c+"</p></div>")),d(b),setTimeout(D,5E3)):setTimeout(D,0));else{c="";if("undefined"==typeof e||null===e)e=U();v(n);c=f&&f.limit?"undefined"!==typeof Antavo.SDK&&Antavo.SDK.getKey("lm_reached_limit")?Antavo.SDK.getKey("lm_reached_limit"):"You had reached the daily limit!":"undefined"!==typeof Antavo.SDK&&Antavo.SDK.getKey("lm_video_already_watched")?Antavo.SDK.getKey("lm_video_already_watched"):"You already got points for this video!";L("successfull");g(".success-wrapper",
"<p>"+c+"</p>")}}function w(a,d){return"vimeo"===d?a.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/):a.match(/^(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/watch\?.+&v=))([\w-]{11})(?:.+)?$/)}function y(a){if(a&&void 0!=a){var d=-1<a.indexOf("vimeo")?"vimeo":"youtube";(a=w(a,d))&&0<a.length?(a=a[a.length-1],l(d,a)):console.error("No video ID found or malformed video URL.")}}
function u(){Antavo&&void 0!=Antavo.SDK.getExtensionInfo()?R=Antavo.SDK.getExtensionInfo("contentconsumption")||!1:window.setTimeout(u,1E3)}function n(){var a="",d;for(d=0;13>d;d++)a+="0123456789".charAt(Math.floor(10*Math.random()));return"apf"+a}function q(d,b,v,c){if("undefined"!=typeof Antavo.SDK&&"undefined"!=typeof Antavo.SDK.getCustomer()&&Antavo.SDK.getBrandId()||G){var n=G||Antavo.SDK.getCustomer(),e=G?G.image_url:Antavo.SDK.getImageUrl(),q="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_get_points_in_minutes_label")?
Antavo.SDK.getKey("lm_get_points_in_minutes_label"):"You will get your points in %s",f="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_spendable_points_label")?Antavo.SDK.getKey("lm_spendable_points_label"):"points",t=document.querySelector("#remaining-box-image");d="<strong>"+d+b+":"+v+" </strong>";b=G?G.first_name:n.handler;v="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lc_customer_greeting")?E(Antavo.SDK.getKey("lc_customer_greeting"),[b]):E("Hi %s!",[b]);O&&null!=p[c].quizUrl&&(q=
null==p[c].was_correct?"undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_get_points_to_quiz_label")?Antavo.SDK.getKey("lm_get_points_to_quiz_label"):"You can take a quiz about this video in %s":0==p[c].was_correct&&null!=p[c].available?"undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_try_again_our_quiz")?Antavo.SDK.getKey("lm_try_again_our_quiz"):"You can take our quiz again in %s":0==p[c].was_correct&&0>p[c].available?"undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_take_quiz_now")?
Antavo.SDK.getKey("lm_take_quiz_now"):"You can take our quiz about this video now ":"undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_get_points_to_quiz_label")?Antavo.SDK.getKey("lm_get_points_to_quiz_label"):"You can take a quiz about this video in %s");L("loggedin");t&&t.setAttribute("src",e);g("#remaining-box-name",b);q.match("%s")?R?g("#remaining-time",v+"&nbsp;"+q.replace(/(%s)/gmi,d)):g("#remaining-time",q.replace(/(%s)/gmi,d)):R?g("#remaining-time",v+"&nbsp;"+q+d):g("#remaining-time",
q+d);if(!p[c].watched||G)g("#remaining-box-point-value",G?"150":p[c].pointsValue),g("#remaining-box-point-label",f)}else q="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_would_get_points")?Antavo.SDK.getKey("lm_would_get_points"):"%s and you would get your points",f="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_spendable_points_label")?Antavo.SDK.getKey("lm_spendable_points_label"):"points",e="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_sign_in_label")?Antavo.SDK.getKey("lm_sign_in_label"):
"Sign in",t=document.querySelector("#remaining-box-login-url"),d="<strong>"+d+b+":"+v+" </strong>",O&&null!=p[c].quizUrl&&(q="undefined"!=typeof Antavo.SDK&&Antavo.SDK.getKey("lm_get_points_to_quiz_label")?Antavo.SDK.getKey("lm_get_points_to_quiz_label"):"and you can take our quiz"),L("guest"),g("#remaining-box-point-value2",p[c].pointsValue),g("#remaining-box-point-label2",f),q.match("%s")?g("#remaining-time2",q.replace(/(%s)/gmi,d)):g("#remaining-time2",q+d),g("#remaining-box-login-link",e),p[c].watched||
(g("#remaining-box-point-value",p[c].pointsValue),g("#remaining-box-point-label",f)),t&&t.setAttribute("href",a())}function t(a,d){return a.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:|$|\/|\?)/)[d]}function A(a,d){var g=/api=1/.test(a.src)?"":"?api=1",b=/player_id=/.test(a.src)?"":"&player_id="+d;return a.getAttribute("src")+g+b}function H(a,d,g){var b={};Antavo.AJAX.get(B("undefined"==typeof a.target?t(d[g].src,
0):a.target.getVideoUrl()),function(a){b.watched=a.done;a.limit&&Antavo.SDK.setCustomerProperty("limit",a.limit);"undefined"!=typeof a.quiz&&null!==a.quiz&&null!=a.quiz.url&&""!=a.quiz.url?(O=!0,d[g].percent_to_watch=98,d[g].quizUrl=a.quiz.url,"undefined"!=typeof a.quiz.points?d[g].pointsValue=a.quiz.points:""):(O=!1,d[g].percent_to_watch=50,a.points&&(d[g].pointsValue=a.points));d&&g&&(d[g].watched=a.done,O&&"undefined"!=typeof a.quiz.is_correct&&(d[g].was_correct=a.quiz.is_correct,d[g].available=
a.quiz.answer_in||null));return b},function(a,d,g){})}function B(a){var d=Antavo.SDK.getEndpoint();Antavo.SDK.getCustomerId()&&(d+="/"+Antavo.SDK.getCustomerId());return d+"/video/"+encodeURIComponent(a)+"?api_key="+Antavo.SDK.getAPIKey()}function C(){for(x in p)clearInterval(p[x].counter)}function D(a){var d=document.querySelector(".remaining-box"),g=window.parent.document.getElementById("antavo-loyalty-video-dialog");a="undefined"!=typeof a?a:!1;1==a&&C();g&&a?d.setAttribute("style","display: none;"):
g||null!==d&&d.setAttribute("style","display: none;")}function a(){if(!G){var a=Antavo.SDK.getLoginUrl(),d=encodeURIComponent(window.location.href);return a?a.match("%s")?a.replace("%s",d):a:Antavo.SDK.getBrandUrl()}return"#"}function d(a){G?Antavo.Event.trigger(document,V.VIDEO_WATCHED,[]):("youtube"===p[a].type?Antavo.SDK.send("video",{type:"youtube",url:p[a].url,id:p[a].video_id}):"vimeo"===p[a].type&&(null!==p[a].url?Antavo.SDK.send("video",{type:"vimeo",url:p[a].url,id:p[a].id}):Antavo.SDK.send("video",
{type:"vimeo",url:p[a].src,id:p[a].id})),"undefined"!=typeof p[a].quizUrl&&null!=p[a].quizUrl&&S(a,p[a].quizUrl));p[a].type="sent"}function v(a){var d=G?self:window.parent,g=d.document.querySelector(".remaining-box");d=P()?d.document.getElementById("antavo-loyalty-video-dialog-wrapper").firstElementChild:d.document.getElementById("antavo-loyalty-video-dialog");var b=a?a.getBoundingClientRect():!1;g&&b&&(d?(g.setAttribute("style","position:fixed;z-index:2147483647;left:"+b.left+"px;top:"+b.bottom+
"px;"),g.style.width="calc("+d.clientWidth+"px - 2rem)"):(g.setAttribute("style","position:fixed;left:"+b.left+"px;top:"+b.bottom+"px;"),g.style.width=a.offsetWidth+"px"))}function g(a,d){var g=(window.parent.document.getElementById("tpl-video-frame")?window.parent:window).document.querySelector(".remaining-box");if(g){var b=g.querySelector(a);T?g.classList.add("brand-"+T):T=Antavo.SDK&&Antavo.SDK.getBrandId()?Antavo.SDK.getBrandId():!1;b&&(b.innerHTML=d)}}function L(a){var d=(window.parent.document.getElementById("tpl-video-frame")?
window.parent:window).document.querySelector(".remaining-box");if(d){var g=d.querySelectorAll(".remaining-box-main-block");d.classList.remove("hidden");if(g)for(var b=0;b<g.length;b++)g[b].classList.add("hidden");d.querySelector("."+a).classList.remove("hidden")}}function U(){var a=(window.parent.document.getElementById("tpl-video-frame")?window.parent:window).document.getElementById("tpl-remaining-box");a&&new Antavo.Template(a.content.cloneNode(!0))}function F(){var a,d=window.parent.document.getElementById("tpl-video-frame")?
window.parent.document:document;if(a=d.getElementById("antavo-loyalty-video-dialog-wrapper"))return a;a=d.createElement("div");a.setAttribute("id","antavo-loyalty-video-dialog-wrapper");G&&a.setAttribute("class","demo-frame");return d.body.appendChild(a)}function E(a,d){for(var g=a,b=0;b<d.length;b++)g=g.replace("%s",d[b]);return g}function M(a){a&&Antavo.Popup.display(a)}function S(a,d){O&&"undefined"!=typeof p[a].was_correct&&"undefined"!=typeof d&&!R&&Antavo.Widget.openSidebar(d)}function N(){D(!0);
return F().parentNode.removeChild(F())}function P(){return 0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv:11\./)||navigator.userAgent.match(/Edge\/12./i)?!0:!1}var p={},K={youtube_enabled:!0,vimeo_enabled:!0,show_banner:!0,must_watch:50},W=!0,O=!1,V={VIDEO_END:"antavo_video_ended",VIDEO_WATCHED:"antavo_video_watched"},G=!1,R=!1,T=Antavo.SDK&&Antavo.SDK.getBrandId()?Antavo.SDK.getBrandId():!1;return{init:function(a,d){var g=window.addEventListener?"addEventListener":
"attachEvent",b=window[g];g="attachEvent"==g?"onmessage":"message";G=d?d:!1;a=a?a:K;W=a.show_banner;D();r(a.youtube_enabled);e(a.vimeo_enabled);document.addEventListener("click",function(a){var d;"antavo-loyalty-video-dialog-wrapper"===a.target.getAttribute("id")&&N();Antavo.DOM.closest(a.target,"[data-close-video-dialog]")&&N();if(d=Antavo.DOM.closest(a.target,"[data-watch-video]"))a.preventDefault(),y(d.getAttribute("data-watch-video"))});document.addEventListener("keyup",function(a){null!=a.which||
null==a.charCode&&null==a.keyCode||(a.which=null!=a.charCode?a.charCode:a.keyCode);"27"===a.which&&N()});b(g,function(a){if(a.data[0]&&"addVideoFrame"===a.data[0]&&a.data[1]){var d=-1<a.data[1].indexOf("vimeo")?"vimeo":"youtube";(a=w(a.data[1],d))&&0<a.length?(a=a[a.length-1],l(d,a)):console.error("No video ID found or malformed video URL.")}},!1);u()},getPlayerList:function(){return p},addVideoFrame:l,openVideo:y,closeVideoFrame:N,injectTemplate:function(a){return document.getElementsByTagName("body")[0].appendChild(Antavo.DOM.fromString(a))}}}(Antavo);
Antavo=window.Antavo||{};
Antavo.Social=function(c){function r(){if(Antavo.SDK.getOption("social")&&("ANYHRA4VTAAABTVOERD"==Antavo.SDK.getAPIKey()||Antavo.SDK.getOption("social").enabled)){var c=z;c.facebook.enabled&&h();c.twitter.enabled&&"ANYHRA4VTAAABTVOERD"!=Antavo.SDK.getAPIKey()&&m();c.google.enabled&&b();w=document.querySelectorAll("[data-as-widgets]");for(c=0;c<w.length;c++){var e=w[c],f=e.getAttribute("data-as-widgets"),A=e.getAttribute("data-as-params");e.hasAttribute("data-as-size")&&e.getAttribute("data-as-size");e.hasAttribute("data-as-layout")&&
e.getAttribute("data-as-layout");if(f&&""!=f)if(f=f.split(","),A=A?A.split(","):[],f.length!=A.length)console.error("One or more social widget parameters are missing.\n Please provide parameters for every social action you've specified in the widget or use `location` where you want to use the current url (please note that this method won't work for follow and subscribe actions)!");else for(var l=0;l<f.length;l++){var u=f[l],C="location"!=A[l]?A[l].trim():location.href;if("facebook-like"==u){var k=
document.createElement("DIV");k.className="fb-like";k.setAttribute("data-layout","button");k.setAttribute("data-action","like");k.setAttribute("data-show-faces","false");k.setAttribute("data-share","false")}else k=document.createElement("A");if("facebook-like"!=u){k.setAttribute("data-"+u,C);a:{var a=["twitter-follow","twitter-tweet"];for(var d=0;d<a.length;d++)if(a[d]===u){a=!0;break a}a=!1}a&&(a="twitter-follow"==u?"https://twitter.com/intent/follow/?screen_name=":"https://twitter.com/intent/tweet/?text=",
k.setAttribute("twitter-follow"==u?"data-twitter-follow":"data-twitter-tweet",C),k.setAttribute("href",a+encodeURIComponent(C)));k.innerText=u}e.appendChild(k);y++}else console.info("Found a social widget without any action. Skipping...")}0<y&&Antavo.SDK.injectStyleSheet()}}function m(){"undefined"==typeof window.twttr&&(window.twttr=function(b,c,e){var n=b.getElementsByTagName(c)[0],f=window.twttr||{};if(b.getElementById(e))return f;b=b.createElement(c);b.id=e;b.src="https://platform.twitter.com/widgets.js";
n.parentNode.insertBefore(b,n);f._e=[];f.ready=function(b){f._e.push(b)};return f}(document,"script","twitter-wjs"),twttr.ready(function(b){document.addEventListener(Antavo.Automation.events.TRACKING_CHANGED,f);b.events.bind("tweet",function(b){b.url=b.target.getAttribute("data-twitter-tweet");k("twitter","tweet",b)});b.events.bind("follow",function(b){b.url=b.target.getAttribute("data-twitter-follow");k("twitter","follow",b)})}))}function b(){var b=document.createElement("script"),c=document.getElementsByTagName("script")[0];
b.setAttribute("src","https://apis.google.com/js/platform.js");c.parentNode.insertBefore(b,c);window.onYoutubeEvent=function(b){}}function h(){"undefined"==typeof FB?(window.fbAsyncInit=function(){FB.init({appId:Antavo.SDK.getFacebookAppId(),xfbml:!0,cookie:!0,status:!0,oauth:!0,version:"v2.3"});FB.Event.subscribe("edge.create",function(b){k("facebook","like",b)});e()},function(b,c,e){var f=b.getElementsByTagName(c)[0];b.getElementById(e)||(b=b.createElement(c),b.id=e,b.src="//connect.facebook.net/en_US/sdk.js",
f.parentNode.insertBefore(b,f))}(document,"script","facebook-jssdk")):e()}function e(){Antavo.Event.bind("click","[data-facebook-share]",function(b){window.fbShareUrlBuffer=closest(b.target,"[data-facebook-share]").getAttribute("data-facebook-share");FB.ui({method:"feed",display:"dialog",link:closest(b.target,"[data-facebook-share]").getAttribute("data-facebook-share")},function(b){b&&b.post_id&&(b.url=window.fbShareUrlBuffer,k("facebook","share",b))})});document.addEventListener(Antavo.Automation.events.TRACKING_CHANGED,
l)}function k(b,c,e){Antavo.SDK.send("social_share",{url:e.url})}function f(){for(var b=document.querySelectorAll('[id*="twitter-widget-"]'),c=0;c<b.length;c++){var e=new Antavo.URL(b[c].getAttribute("src"));e=e.parseQuery(e.hash);var f=new Antavo.URL("https://twitter.com/intent/tweet"),h=document.createElement("A");f.params.url=window.location.toString();e.via&&(f.params.via=e.via);e.text&&(f.params.text=e.text);h.setAttribute("href",f.toString());h.classList.add("twitter-share-button");b[c].parentNode.insertBefore(h,
b[c]);b[c].parentNode.removeChild(b[c]);twttr.widgets.load()}}function l(){for(var b=document.querySelectorAll(".fb-share-button, .fb-like"),c=0;c<b.length;c++){b[c].getAttribute("data-href");var e=b[c].getAttribute("data-layout"),f=document.createElement("DIV");f.className=b[c].classList.contains("fb-share-button")?"fb-share-button":"fb-like";f.setAttribute("data-href",window.location.href);-1<e.indexOf("button")?f.setAttribute("data-layout","button"):f.setAttribute("data-layout","box");b[c].hasAttribute("data-action")&&
f.setAttribute("data-action",b[c].getAttribute("data-action"));b[c].hasAttribute("data-show-faces")&&f.setAttribute("data-show-faces",b[c].getAttribute("data-show-faces"));b[c].hasAttribute("data-share")&&f.setAttribute("data-share",b[c].getAttribute("data-share"));b[c].parentNode.insertBefore(f,b[c]);b[c].parentNode.removeChild(b[c])}FB.XFBML.parse()}var z={facebook:{enabled:!0},twitter:{enabled:!0},google:{enabled:!0}},w,y=0,u={};["antavo_sdk_customer_authenticated","antavo_sdk_customer_not_authenticated"].forEach(function(b){document.addEventListener(b,
r)});return{init:r,getShareCounts:function(){return u}}}(Antavo);Antavo=window.Antavo||{};
(function(c){function r(a,d){a&&a.classList.contains(d)?a.classList.remove(d):a&&a.classList.add(d)}function m(){var a=c.querySelector(".la-social-share-block");if(t&&a){if(a.classList.add("mobile"),B.mobile_position)switch(B.mobile_position){case "top-right":a.classList.add("top");a.classList.add("right");break;case "bottom-right":a.classList.add("bottom");a.classList.add("right");break;case "bottom-left":a.classList.add("bottom"),a.classList.add("left")}}else B.desktop_position&&"right"==B.desktop_position&&
a&&a.classList.add("right-attached")}function b(){if(Antavo.SDK.getCustomer()){var a=Antavo.Cookie.get("__alru");a&&5<a.length&&(Antavo.Cookie.set("__alru","",1),window.top.location=a)}}function h(){var a=c.querySelector("[data-mobile-share-button]"),d=c.querySelector(".la-social-share-list"),b=c.querySelector("[data-close-share-section]");t&&a&&a.addEventListener("click",function(b){r(d,"expanded");r(a,"text");d.classList.remove("fade")});b&&b.addEventListener("click",function(a){a=c.querySelector(".la-social-share-popup");
var d=f();a&&(a.setAttribute("hidden",!0),a.classList.add("hidden"),a.classList.add("loading"));d&&d.setAttribute("hidden",!0)});c.addEventListener("click",function(b){var g=Antavo.DOM.closest(b.target,"[data-antavo-share]");if(g){b.preventDefault();t&&(r(d,"expanded"),r(a,"text"),r(d,"fade"),r(b.target,"clicked"));var c=g.getAttribute("href")?g.getAttribute("href"):!1;"facebook"===g.getAttribute("data-antavo-share")?FB.ui({method:"share",href:c||window.top.location.href,display:"iframe"},function(a){a&&
(Antavo.SDK.send("share",{network:"facebook",url:c||window.top.location.href}),Antavo.Popup.display(Antavo.Popup.getShareUrl(Antavo.SDK.getBrandUrl())+"/success"))}):Antavo.Popup.display(l(g.getAttribute("data-antavo-share"),c,g.getAttribute("data-antavo-share-preset")?g.getAttribute("data-antavo-share-preset"):null))}})}function e(){var a=c.createElement("link"),d=c.getElementsByTagName("link")[0],b=!Antavo.SDK.getCustomerId()||""==Antavo.SDK.getCustomerId(),g=9==Antavo.SDK.getBrandId()||28658==
Antavo.SDK.getBrandId()?"":"<small>Sign up or log in to start collect points.</small>",e=B.networks;c.getElementById("antavo_loyalty_social_share_css")||(a.setAttribute("href",Antavo.SDK.getCDNUrl()+"/css/loyalty/social_share.css"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("id","antavo_loyalty_social_share_css"),d.parentNode.insertBefore(a,d));if(e&&0<e.length&&Antavo.Popup){9==Antavo.SDK.getBrandId()||28658==Antavo.SDK.getBrandId()?a='<div class="la-social-share-block" style="opacity: 0;"><a data-mobile-share-button></a><ul class="la-social-share-list">':
(a='<div class="la-social-share-block" style="opacity: 0;"><a data-mobile-share-button><strong data-social-share-points>750</strong><span data-social-share-points-label>&nbsp;points</span></a><ul class="la-social-share-list"><li class="la-social-share-points"><span class="la-social-share-points-label" data-social-share-points>250</span><span data-social-share-points-label>&nbsp;points</span>',b&&(a+=g),a+="</li>");for(d=0;d<e.length;d++)"email"!==e[d]&&(a+='<li><a data-antavo-share="'+e[d]+'">',b&&
(a+=g),a+="</a></li>");Antavo.Popup.injectTemplate(a+"</ul></div>")}}function k(){return Antavo.SDK.getExtensionInfo("socialshare","url")||""}function f(){var a;if(!(a=window.parent.document.getElementById("la-social-share-popup-frame"))){a=window.parent.document;var d=a.createElement("IFRAME");d.setAttribute("id","la-social-share-popup-frame");a=a.body.appendChild(d)}return a}function l(a,d,b){var g=d||window.top.location.href;d=new Antavo.URL(k()?k()+"/"+a:window.top.location.href);var c;g&&!g.match(Antavo.Automation.getCheckRegexp())&&
(c=Antavo.SDK.getCustomerId())&&(c=window.btoa(c),g=new Antavo.URL(g),c=-1<c.indexOf("=")?c.substr(0,c.indexOf("=")):c,"hash"===Antavo.SDK.getOption("tracking","hashMethod")?g.hash="__s"+c:g.params.__s=c,g=g.toString());g=encodeURIComponent(g);Antavo.SDK&&Antavo.SDK.getCustomerId()?d.params.url=g+"|"+({facebook:"f",twitter:"b",email:"e"}[a]||""):d.params.url=g;b&&(d.params.message=encodeURIComponent(b));return d.toString()}function z(a){var d=c.querySelector(".la-social-share-popup"),b=f();d&&(d.classList.remove("hidden"),
d.removeAttribute("hidden"),b.setAttribute("src",l(a)),b.onload=function(){d.classList.remove("loading");this.classList.add("open");this.removeAttribute("hidden");(new Talker(b.contentWindow,"*")).send("antavoSocialShare",{command:"content-loaded"});this.onload=null})}function w(){for(var a=c.getElementsByTagName("meta"),d=0;d<a.length;d++)switch(a[d].getAttribute("property")){case "og:title":A.og_title=a[d].getAttribute("content");break;case "og:description":A.og_description=a[d].getAttribute("content");
break;case "og:url":A.og_url=a[d].getAttribute("content");break;case "og:image":A.og_image_url=a[d].getAttribute("content");break;case "image":A.image_url=a[d].getAttribute("content");break;case "url":A.url=a[d].getAttribute("content");break;case "description":A.description=a[d].getAttribute("content");break;case "title":A.title=a[d].getAttribute("content")}c.querySelector("title")&&(A.defaultTitle=c.querySelector("title").innerHTML);return A}function y(a){var d=0,b;if(0===a.length)return d;var g=
0;for(b=a.length;g<b;g++){var c=a.charCodeAt(g);d=(d<<5)-d+c;d|=0}0>d&&(d*=-1);return d}function u(){if(9==Antavo.SDK.getBrandId()||28658==Antavo.SDK.getBrandId())return!1;for(var a=c.querySelectorAll("[data-social-share-points]"),d=Antavo.SDK.getExtensionInfo("socialshare"),b=0;b<a.length;b++)a[b]&&d&&null!=d.points&&(a[b].innerHTML="+"+d.points)}function n(){if(9==Antavo.SDK.getBrandId()||28658==Antavo.SDK.getBrandId())return!1;for(var a=c.querySelectorAll("[data-social-share-points-label]"),d=
Antavo.SDK.getKey("lm_points_label")||"points",b=0;b<a.length;b++)a[b]&&d&&null!=d&&(a[b].innerHTML="&nbsp;"+d)}function q(){Antavo.SDK.getBrandId()?(B=Antavo.SDK.getExtensionInfo("socialshare"),C=Antavo.SDK.getOption("socialShare"),B&&C&&C.enabled&&(H=new Talker(window.parent,"*"),e(),H.onMessage=function(a){},b(),h(),m(),u(),n())):setTimeout(function(){q()},1E3)}var t=Antavo.isMobile().any(),A={},H,B,C;q();var D={};D.init=q;D.display=function(){};D.popup=z;D.handleError=function(a){var d=f();d.classList.add("error");
d.setAttribute("data-error-message",a)};D.share=function(a){w();z(a)};D.storePreLoginState=function(a,d){"undefined"!=typeof a&&""==Antavo.SDK.getCustomerId()&&Antavo.Cookie.set("__alru",a+"#la_popup="+("facebook"==d?1:"twitter"==d?2:3),360)};D.getMetaDataFromPage=w;D.storeShareMessage=function(a){"undefined"!=typeof a&&Antavo.Cookie.set("__las"+y(window.top.location.hostname.toString()),JSON.stringify(a),180)};D.clearShareMessage=function(){Antavo.Cookie.set("__las"+y(window.top.location.hostname.toString()),
"",10)};D.getStoredShareMessage=function(){var a=Antavo.Cookie.get("__las"+y(window.top.location.hostname.toString()));return a&&"undefined"!=typeof a&&""!=a?JSON.parse(a):!1};Antavo.ShareButtons=D})(document);Antavo=window.Antavo||{};
(function(c){function r(){var b;(b=c.querySelector(".antavo-toast"))||(b=c.createElement("DIV"),b.className="antavo-toast",b.innerHTML="<a href='' class='antavo-toast-link' target='_blank'><div class='antavo-toast-image'></div><p class='antavo-toast-title'></p><span class='antavo-toast-text'></span></a>",b=c.body.appendChild(b));return b}function m(){n=u=!0;return r().classList.add("paused")}function b(){n=!1;return r().classList.remove("paused")}function h(){if(!n)return n=u=!1,r().classList.remove("burnt");
setTimeout(h,1E3)}function e(b){var c=new Antavo.URL(b);c.params.utm_medium="toast";c.params.utm_campaign="points";0>window.location.toString().indexOf(b)?c.params.utm_source="website":c.params.utm_source="microsite";return c}function k(c,f,t,n,a,d,v){if(Antavo.SDK.getExtensionInfo("toast")){var g=r(),q=Antavo.SDK&&Antavo.SDK.getBrandUrl();q?g.querySelector(".antavo-toast-link").setAttribute("href",e(q).toString()):g.querySelector(".antavo-toast-link").removeAttribute("href");void 0!==Antavo.SDK&&
g.setAttribute("data-details",Antavo.SDK.getKey("lm_details_label","Details"));g.querySelector(".antavo-toast-title").innerHTML=c;g.querySelector(".antavo-toast-text").innerHTML=f||"";g.className=d?"antavo-toast "+d+" burnt":"antavo-toast burnt";g.classList.add("thirdparty");n&&g.classList.add("internal");if(void 0!==Antavo.Widget)if(Antavo.Widget.isSidebarOpen())g.classList.add("sidebar");else if(c=Antavo.Widget.isWidgetShowing())g.classList.add(c.vertical+"-"+c.horizontal),g.classList.add("widget");
f&&""!==f||g.classList.add("notext");t?(g.querySelector(".antavo-toast-image").style.backgroundImage="url("+t+")",g.querySelector(".antavo-toast-image").style.backgroundColor="transparent"):(g.querySelector(".antavo-toast-image").style.backgroundColor="#febd00",g.querySelector(".antavo-toast-image").style.backgroundImage="url(https://cdn3.antavo.com/img/loyalty/anonymous.png)",g.querySelector(".antavo-toast-image").classList.remove("hide"));g.addEventListener("mouseover",m);g.addEventListener("mouseout",
b);u=!0;a&&"function"===typeof a&&a.call(window,g);v||setTimeout(h,8E3);return g}}function f(b){if(Antavo.SDK.getExtensionInfo("toast")){var e=b.data.points;-1<t.indexOf(b.id)?Antavo.Event.trigger(c,"antavo_sdk_notification_shown",b):(t.push(b.id),k(b.data.points===Math.abs(e)?Antavo.SDK.getKey("lm_got_points_now"):Antavo.SDK.getKey("lm_points_withdrawn","Oh, we are sorry"),"<strong>"+e+"</strong> "+Antavo.SDK.getKey("lm_points_label"),Antavo.SDK.getCustomer().image_url,null,function(f){var h,a=c.createElement("canvas"),
d=a.getContext("2d"),v=[12,10,32,14,16,22,48,13,24,15,9],g=f.querySelector("canvas");a.width=275;a.height=94;for(h=0;80>h;h++){var t=Math.round(10*Math.random());d.font=v[t]+"px Arial Black";d.fillStyle="rgba(255,255,255,"+Math.random().toFixed(2)+")";d.fillText(e,Math.floor(275*Math.random())+0,Math.floor(94*Math.random())+0)}g&&g.parentNode.removeChild(g);f.appendChild(a);Antavo.Event.trigger(c,"antavo_sdk_notification_shown",b)}))}}function l(){var b;u?setTimeout(l,500):(b=q.shift())&&f(b)}function z(b){q.push(b.detail);
l()}function w(){c.addEventListener("antavo_sdk_show_notification",z)}function y(){Antavo.SDK.getBrandId()?(w(),Antavo.SDK.injectStyleSheet()):setTimeout(y,500)}var u=!1,n=!1,q=[],t=[],A={};A.init=y;A.setEventHandlers=w;A.show=k;A.hide=h;A.EVENT_SHOW="antavo_sdk_show_notification";Antavo.Toast=A})(document);Antavo=window.Antavo||{};
Antavo.Automation=function(c){function r(){q=new Antavo.URL(window.parent.location);H||(H=decodeURIComponent(window.location.toString()),Antavo.Event.trigger(document,"hash-stored",{}));if(Antavo.SDK.getBrandId()){var b=Antavo.SDK.getExtensionInfo("contentconsumption"),c=Antavo.SDK.getExtensionInfo("newslettertracking");q.params.__al&&(delete q.params.__al,"hash"===Antavo.SDK.getOption("tracking","hashMethod")?q.hash=null:delete q.params.__s,history.replaceState(null,null,q.toString()),m());z();c&&
c.enabled&&q.params.__alc&&q.params.__aln&&Antavo.SDK.send("newsletter_click",{url:q.protocol+"://"+q.host+q.path,campaign:q.params.__aln},q.params.__alc);Antavo.SDK.getOption("tracking","autoSend")?document.addEventListener("scroll",function(a){a=document.documentElement.scrollTop||document.body.scrollTop;!B&&a>=.5*(document.body.clientHeight-window.innerHeight)&&m()}):b&&b.hasOwnProperty("visit")&&b.visit&&b.hasOwnProperty("quiz_url")&&!b.quiz_url&&m()}else setTimeout(function(){r()},500)}function m(){Antavo.SDK.send("visit",
{url:q.toString()});B=!0}function b(){return"hash"===Antavo.SDK.getOption("tracking","hashMethod")?RegExp("#__s([A-Za-z0-9+/=]+)","g"):RegExp("[?|&]__s=([A-Za-z0-9+/=]+)","g")}function h(){if(Antavo.SDK.getCustomerId()&&!0===Antavo.SDK.getOption("tracking","setHash"))if(t)setTimeout(function(){h()},500);else{var b=new Antavo.URL(window.parent.location),c=w(Antavo.SDK.getCustomerId());c=-1<c.indexOf("=")?c.substr(0,c.indexOf("=")):c;"hash"===Antavo.SDK.getOption("tracking","hashMethod")?b.hash="__s"+
c:b.params.__s=c;history.replaceState(null,null,b.toString());window.addEventListener("hashchange",h)}}function e(b){var c={f:"facebook",b:"twitter",t:"tumblr",e:"email",p:"pinterest",g:"google"},a;for(a in b)if("undefined"!=typeof c[b[a]])return c[b[a]].toString()}function k(){var b={facebook:/(facebook.com)/,twitter:/(\/t.co\/)/,tumblr:/(t.umblr.com)/,pinterest:/(pinterest.com)/,google:/(google.com)/};if(document.referrer&&""!=document.referrer&&"undefined"!=typeof document.referrer)for(var c in b)if(document.referrer.match(b[c]))return c.toString();
return""}function f(b){b&&0<b.length&&!Antavo.Cookie.get("__ats")&&Antavo.Cookie.set("__ats",b,2592E3)}function l(){var b=("hash"===Antavo.SDK.getOption("tracking","hashMethod")?RegExp("#__s([A-Za-z0-9+/=]+)(\\|([fbtgerpc]+))(\\|([a-f0-9]\\w+))?","g"):RegExp("[?|&]__s=([A-Za-z0-9+/=]+)(\\|([fbtgerpc]+))(\\|([a-f0-9]\\w+))?","g")).exec(decodeURIComponent(window.location.toString()));if(b&&"undefined"!=typeof b[3]){f(e(b[3]));for(var c=b[5],a=b[3].split(""),d=0;d<a.length;d++)if("c"==a[d].toLowerCase()&&
"undefined"!=typeof c){var v=c,g=Antavo.SDK.getExtensionInfo("contests","url");g&&v&&Antavo.Popup.display(g+"/"+v)}else"r"==a[d].toLowerCase()&&(v=y(b[1]),v=v.trim().replace(/[^\x20-\x7E]+/g,""),Antavo.SDK.getCustomerId()!=v&&(v=Antavo.SDK.getExtensionInfo("friendreferral","url"))&&Antavo.Popup.display(v+"/coupon"+(Antavo.isMobile().any()?"?mobile=true":"")))}else f(k())}function z(){var c=b().exec(decodeURIComponent(window.location.toString())),e=Antavo.Cookie.get("__alr");if(c&&y(c[1])){c=y(c[1]);
c=c.trim().replace(/[^\x20-\x7E]+/g,"");l();if(Antavo.SDK.getCustomerId()!=c){"hash"===Antavo.SDK.getOption("tracking","hashMethod")?q.hash="":delete q.params.__s;history.replaceState(null,null,q.toString());e||Antavo.Cookie.set("__alr",c,7776E3,"/",Antavo.SDK.getTopDomain());e={url:q.toString()};var a=Antavo.SDK.getVisitor();document.referrer&&(e.referrer=document.referrer);a&&(e.visitor=a);Antavo.SDK.send("share_impression",e,c)}Antavo.SDK.getCustomerId()&&(c=new Antavo.URL(window.parent.location),
e=w(Antavo.SDK.getCustomerId()),e=-1<e.indexOf("=")?e.substr(0,e.indexOf("=")):e,"hash"===Antavo.SDK.getOption("tracking","hashMethod")?c.hash="__s"+e:c.params.__s=e,history.replaceState(null,null,c.toString()),t=!1,Antavo.Event.trigger(document,A.TRACKING_CHANGED))}}function w(b){b=escape(b);var c="",a=0;do{var d=b.charCodeAt(a++);var e=b.charCodeAt(a++);var g=b.charCodeAt(a++);var f=d>>2;d=(d&3)<<4|e>>4;var h=(e&15)<<2|g>>6;var t=g&63;isNaN(e)?h=t=64:isNaN(g)&&(t=64);c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)}while(a<b.length);return c}function y(b){var c="",a=0;if(/[^A-Za-z0-9\+\/=]/g.exec(b))return!1;b=b.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(a++));var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(a++));
var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(a++));var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(a++));d=d<<2|e>>4;e=(e&15)<<4|g>>2;var h=(g&3)<<6|f;c+=String.fromCharCode(d);64!=g&&(c+=String.fromCharCode(e));64!=f&&(c+=String.fromCharCode(h))}while(a<b.length);return unescape(c)}var u=[],n=[],q,t=!1,A={TRACKING_CHANGED:"antavo_sdk_tracking_hash_changed"},H,B=!1;return{events:A,decode64:y,init:r,updatePoints:function(b){u=
document.querySelectorAll(".alms-point-placeholder");for(var c=0;c<u.length;c++)u[c].innerHTML=b},updateLimitPoints:function(b){var c=document.querySelector("[data-daily-limit]");n=document.querySelectorAll("[data-limit-point]");for(var a=0;a<n.length;a++){var d=parseInt(n[a].innerHTML.replace(/\s+/g,""))-b;if(c){var e=100-parseInt(d/c.getAttribute("data-daily-limit")*100);document.querySelector("[data-limit-progressbar]").style.width=e+"%"}0>=d&&(document.querySelector(".alms-messaging-container").classList.add("counter"),
document.querySelector(".alms-messaging-countdown-container-wrapper").classList.remove("hidden"));n[a].innerHTML=0<=d?Antavo.SDK.formatNumber(d):"0"}},getCustomerHash:function(){if(Antavo.SDK.getCustomerId()){var b=w(Antavo.SDK.getCustomerId());return-1<b.indexOf("=")?b.substr(0,b.indexOf("=")):b}return!1},setCustomerHash:h,hasCustomerHash:function(){var c=b().exec(decodeURIComponent(window.location.toString()));if(c&&y(c[1])){c=y(c[1]);c=c.trim().replace(/[^\x20-\x7E]+/g,"");if(Antavo.SDK.getCustomerId()==
c)return!0;t=!0}return!1},isHashChanged:function(){return!1},isHashChangeNeeded:function(){return t},getPrefixedCustomerHash:function(b){if(Antavo.SDK.getCustomerId()){var c=b?"|"+b:"";b=w(Antavo.SDK.getCustomerId());b=-1<b.indexOf("=")?b.substr(0,b.indexOf("=")):b;b="__s"+b+c;c=""==c?k():e(c);f(c);return b}},storeTrafficSource:f,getSocialChannel:l,getStoredURL:function(){return H},getCheckRegexp:b,isEventSent:function(){return B},setEventSent:function(){B=!0}}}(Antavo);Antavo.Automation.init();
Antavo=window.Antavo||{};
(function(c){function r(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return(0<b||navigator.userAgent.match(/Trident.*rv:11\./))&&10===parseInt(a.substring(b+5,a.indexOf(".",b)))?!0:!1}function m(){if(Antavo.SDK.getBrandId()){var a=c.createElement("link"),b=c.getElementsByTagName("link")[0];c.getElementById("antavo_popup_css")||(a.setAttribute("href",Antavo.SDK.getCDNUrl()+"/css/loyalty/antavo-popup.css"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("id",
"antavo_popup_css"),"undefined"!=typeof b&&b?b.parentNode.insertBefore(a,b):c.querySelector("head").appendChild(a))}else setTimeout(m,500)}function b(a){return c.getElementsByTagName("body")[0].appendChild(Antavo.DOM.fromString(a))}function h(){var a=c.querySelector(".la-popup-frame"),b=z(),g=c.querySelector(".la-popup-overlay");r()&&g&&(g.style.display="none");a&&(a.setAttribute("hidden",!0),a.classList.add("hidden"),a.classList.add("loading"),H=!1);b&&(b.removeAttribute("src"),b.setAttribute("hidden",
!0));y(0,0)}function e(a){return Antavo.SDK.getExtensionInfo("socialshare","url")||a+"/share/"+Antavo.SDK.getBrandId()}function k(a){if(Antavo.SDK.getBrandId())switch(a[2]){case "0":t(e(Antavo.SDK.getBrandUrl())+"/success");break;case "1":t(e(Antavo.SDK.getBrandUrl())+"/facebook?url="+window.top.location);break;case "2":t(e(Antavo.SDK.getBrandUrl())+"/twitter?url="+window.top.location);break;case "3":t(e(Antavo.SDK.getBrandUrl())+"/email?url="+window.top.location)}else setTimeout(function(){k(a)},
500)}function f(a){(a=RegExp("(\\#la_popup)=([0-9]{1})","g").exec(a.newURL||a))&&a[2]&&(k(a),a=window.top.location.toString().split("#")[0],window.history.pushState("","",a))}function l(){var a=c.querySelector(".la-popup-frame").querySelector("[data-close-popup]");a&&a.addEventListener("click",function(a){a.preventDefault();h()});c.addEventListener("hash-stored",function(a){f(Antavo.Automation.getStoredURL())});f(Antavo.Automation.getStoredURL());window.onhashchange=f}function z(){if(window.parent.document.getElementById("la-social-share-popup-frame"))var a=
window.parent.document.getElementById("la-social-share-popup-frame");else{a=window.parent.document;var b=a.createElement("IFRAME");b.setAttribute("id","la-social-share-popup-frame");a=a.body.appendChild(b)}return a}function w(a){"undefined"!=typeof ga&&ga?ga("send","event","Popup","open",a):Antavo.AJAX.get(Antavo.SDK.getBrandUrl()+"/track/popup?url="+a)}function y(a,b){var d=c.querySelector(".la-popup-frame");d&&!C&&b?d.setAttribute("style","height: "+a+"px !important; width: "+b+"px !important"):
d&&200<b?d.setAttribute("style","height: "+a+"px !important; width: "+b+"px !important"):d&&d.setAttribute("style","height: "+a+"px !important")}function u(a){var b=c.querySelector(".la-popup-frame");b&&b.classList.add(a)}function n(a){B=new Talker(a.contentWindow,"*");B.send("antavoSocialShare",{command:"content-loaded",data:Antavo.ShareButtons.getStoredShareMessage(),url:Antavo.SDK.getBrandUrl(),share_url:Antavo.SDK.getExtensionInfo("socialshare","url"),hash_based:"hash"===Antavo.SDK.getOption("tracking",
"hashMethod"),id:Antavo.SDK.getBrandId(),mobile:Antavo.isMobile().any()||640>window.parent.document.body.getBoundingClientRect().width});B.send("antavoSocialShare",{command:"share-object",data:Antavo.ShareButtons.getMetaDataFromPage()});B.send("antavoSocialShare",{command:"previous-dialog",data:Antavo.ShareButtons.getStoredShareMessage(),url:Antavo.SDK.getBrandUrl(),id:Antavo.SDK.getBrandId()});B.send("antavoPopup",{command:"content-loaded"});C&&(B.send("antavoPopup",{command:"mobile-view"}),u("mobile"));
B.onMessage=function(a){if("antavoSocialShare"===a.namespace)if("store-dialog"==a.data.command)Antavo.ShareButtons.storeShareMessage(a.data.data);else if("resize-frame"==a.data.command)y(a.data.height,a.data.width),a.data.addClass&&""!=a.data.addClass&&u(a.data.addClass);else if("open-popup"==a.data.command){var b=a.data.url+"?url="+window.top.location.toString();"facebook"===a.data.network?(Antavo.Popup.close(),D||(D=!0,FB.ui({method:"share",href:b||window.top.location.href,display:"iframe"},function(a){D=
!1;a&&(Antavo.SDK.send("share",{network:"facebook",url:b||window.top.location.href}),Antavo.Popup.display(Antavo.Popup.getShareUrl(Antavo.SDK.getBrandUrl())+"/success"))}))):t(b)}else"close-popup"==a.data.command?h():"clear-cookie"==a.data.command?Antavo.ShareButtons.clearShareMessage():"store-login-state"==a.data.command?Antavo.ShareButtons.storePreLoginState(window.top.location.toString(),a.data.network):"redirect-view"==a.data.command&&c.querySelector("[data-close-popup]").classList.add("hidden");
else"antavoPopup"===a.namespace&&("resize-frame"==a.data.command?y(a.data.height,a.data.width):"hideQuizWidget"==a.data.command&&Antavo.Quiz.hide())}}function q(a){var b=Antavo.SDK.getOption("locale");if(b&&null!=b){a=new Antavo.URL(a);var d=a.params.url;a.params.locale=b.toString().toLowerCase();d&&(delete a.params.url,a.params.url=d);return a.toString()}return a}function t(a){var b=c.querySelector(".la-popup-frame"),d=z(),e=c.querySelector(".la-popup-overlay");a=q(a);r()&&e&&(e.style.display="block");
!b||d.getAttribute("src")==decodeURIComponent(a)&&H||(b.classList.remove("hidden"),b.removeAttribute("hidden"),b.classList.add("loading"),b.classList.remove("open"),C&&b.classList.add("mobile"),y(200,150),d.setAttribute("src",decodeURIComponent(a)),d.onload=function(){y(126,150);var a=c.querySelector(".la-popup-frame");a&&(a.className="la-popup-frame");b.classList.remove("loading");this.classList.add("open");this.removeAttribute("hidden");n(d)},w(a),H=!0)}function A(){m();c.querySelector(".la-popup-frame")||
b('<div class="la-popup-overlay"><div class="la-popup-frame loading hidden"><a href="#" data-close-popup></a><iframe src="" id="la-social-share-popup-frame" class="la-social-share-popup-content" hidden></iframe></div></div>');l();if(r()){var a=c.querySelector(".la-popup-overlay");a&&(a.style.display="none")}}var H=!1,B,C=Antavo.isMobile().any()||!1,D=!1;A();var a={};a.init=A;a.close=h;a.injectTemplate=b;a.display=t;a.resizeFrame=y;a.getShareUrl=e;Antavo.Popup=a})(document);Antavo=window.Antavo||{};
(function(c){function r(a){var c,g;[].forEach.call(a,function(a){var f;if(f=a.getAttribute("data-aip-properties"))try{var h=JSON.parse(f)}catch(S){h="object"===typeof window[f]?window[f]:a.getAttribute("data-aip-value")||0}else h=a.getAttribute("data-aip-value")||0;c=h;g="object"===typeof c?y([c],m(),d):e(c,d,1);h=b(v,g);f=a.getAttribute("data-aip-tense");a.innerHTML=h[f||1]})}function m(){return[].filter.call(D,function(a){var b=Antavo.SDK.getCustomer();a=a.modules.incentivizedpurchase.segment;var d;
if(!(d=!a))a:{if(b)for(d=0;d<b.segments.length;d++)if(b.segments[d][a]){d=!0;break a}d=!1}if(d)return!0})}function b(a,b){return[].map.call(a,function(a){return a.replace(/%d/g,b)})}function h(a,b){return{past:a[0].replace(/%d/g,b),present:a[1].replace(/%d/g,b),future:a[2].replace(/%d/g,b)}}function e(a,b,d,c){return"undefined"!==typeof c?(a+c).toFixed():(parseFloat("string"===typeof d?d.replace(",","."):d)*(b/100)*a).toFixed()}function k(a,b){return b.reduce(function(b,d){return!(!b||!f(a,d))},!0)}
function f(a,b){return b.reduce(function(b,d){return!(!b&&!t(a[d.property],d.operator,d.value))},!1)}function l(a,b){return k(a,b.modules.incentivizedpurchase.filters)}function z(a,b,d,c){var g=!1,f=0,h=0;[].forEach.call(b,function(b){l(a,b)&&(b=b.modules.incentivizedpurchase,h="multiply"===b.calculation?parseInt(e(d,c,b.value)):parseInt(e(d,c,1,b.value)),h>f&&(f=parseInt(h),g=b))});return g}function w(a,b,d,c){var g=!1,f=0,h=0;[].forEach.call(b,function(b){var v=b.end_date;l(a,b)&&(b=b.modules.incentivizedpurchase,
h="multiply"===b.calculation?parseInt(e(d,c,b.value)):parseInt(e(d,c,1,b.value)),h>f&&(f=parseInt(h),g=v))});return g}function y(a,b,d){var c=[];[].forEach.call(n(a),function(a){var g;(g=z(a,b,a.value,d))?"multiply"===g.calculation?c.push(e(a.value,d,g.value)):c.push(e(a.value,d,1,g.value)):c.push(e(a.value,d,1))});return c}function u(a,b){var d=[],c=0;[].forEach.call(a,function(a,g){var e=h(v,b[g]);a.hasOwnProperty("product_id")&&(e.product_id=a.product_id);a.hasOwnProperty("product_name")&&(e.product_name=
a.product_name);c=parseInt(c)+parseInt(b[g]);d.push(e)});var g=h(v,c);g.total=!0;d.push(g);return d}function n(a){var b=q(a);return[].map.call(a,function(a,d){a.total=b.total;a.total_quantity=b.total_quantity;return a})}function q(a){var b=0,d=0;[].forEach.call(a,function(a,c){b+=a.subtotal||a.value*(a.quantity||1);d+=a.quantity||1});return{total:b,total_quantity:d}}function t(a,b,d){switch(b){case "start":return!!a.match(new RegExp("^"+d,"i"));case "not_start":return!a.match(new RegExp("^"+d,"i"));
case "end":return!!a.match(new RegExp(d+"$","i"));case "not_end":return!a.match(new RegExp(d+"$","i"));case "contain":return H(a,d);case "not_contain":return!H(a,d);case "equal":return A(a,d);case "not_equal":return!A(a,d);case "less":return a<d;case "not_greater":return a<=d;case "greater":return a>d;case "not_less":return a>=d;case "between":return a>=d[0]&&a<=d[1];case "exists":return B(a,d);case "not_exists":return!B(a,d);default:console.error("Unsupported operator type:"+b)}}function A(a,b){return"undefined"===
typeof a||"undefined"===typeof b?!1:"string"==typeof a||"string"==typeof b?a.toString().toLowerCase()===b.toString().toLowerCase():a===b}function H(a,b){return B(a,null)&&-1!=a.toString().toLowerCase().indexOf(b.toString().toLowerCase())}function B(a,b){return null!=a&&"undefined"!=typeof a&&""!=a}function C(){var b;if(Antavo.SDK.getBrandId()){d=Antavo.SDK.getExtensionInfo("incentivizedpurchase","percentage")||100;if(b=Antavo.SDK.getExtensionInfo("campaigns"))D=b.campaigns;b=Antavo.SDK.getKey("lc_aip_inner_content_past")||
v[0];v[0]=b;b=Antavo.SDK.getKey("lc_aip_inner_content")||v[1];v[1]=b;b=Antavo.SDK.getKey("lc_aip_inner_content_future")||v[2];v[2]=b;b=c.querySelectorAll("[data-aip-value]");for(var e=a,f=0;f<b.length;f++)e.push(b[f]);r(e)}else window.setTimeout(C,1E3)}var D=[],a=[],d,v=["Got %d points","Get %d points","Will get %d points"];Antavo.Campaigns={init:C,getCampaigns:m,getStrings:function(a){return u(a,y(a,m(),d))},getRelevantCampaignEndDate:function(a){return w(a,m(),a.value,d)},calculateCampaignBonus:function(a,
b){Antavo.AJAX.post(Antavo.SDK.getApiHost()+"/extensions/automation/campaign-bonus",{api_key:Antavo.SDK.getAPIKey(),customer:Antavo.SDK.getCustomerId(),data:a||{}},function(d){var c=Antavo.SDK.getExtensionInfo("incentivizedpurchase"),g=0;(a.items||{}).forEach(function(a){if(a.subtotal&&a.quantity)switch(c.rounding){case "floor":g+=Math.floor(a.subtotal);break;case "ceil":g+=Math.ceil(a.subtotal);break;default:g+=Math.round(a.subtotal)}});var f=0;c&&c.percentage&&(f=1*e(g,c.percentage,1));d.forEach(function(a){f+=
a.points});b&&b(h(v,f))})}}})(document);Antavo=window.Antavo||{};
(function(c){function r(){var b=c.createElement("DIV");b.className="antavo-poll-toast";b.innerHTML='<div class="antavo-poll-toast-inner"><div class="antavo-poll-toast-points"></div><a class="antavo-poll-toast-link"></a></div>';return c.body.appendChild(b)}function m(b){var e=c.querySelector(".antavo-poll-toast")||r();n=!0;e.querySelector(".antavo-poll-toast-points").innerHTML=b.points+"&nbsp;"+Antavo.SDK.getKey("lm_points_label","points");e.classList.add("antavo-poll-toast-show")}function b(){(c.querySelector(".antavo-poll-toast")||
r()).classList.remove("antavo-poll-toast-show");n=!1;w.length&&setTimeout(h,1E3)}function h(){var b=w.shift();if(b&&!n&&(!Antavo.Cookie.get("__altm")||(Antavo.Cookie.get("__altm")||!1)<b.id)){var c=b.id,e=Antavo.Cookie.get("__altm");e&&Antavo.Cookie.expire("__altm",e,"/",Antavo.SDK.getTopDomain());Antavo.Cookie.set("__altm",c,"/",Antavo.SDK.getTopDomain());z=z+"&last="+c;m(b)}}function e(){if(u)return!1;Antavo.AJAX.get(z,function(b){if(0<b.length){for(var c=0;c<b.length;c++)w.push(b[c]);setTimeout(e,
l[y]);h()}else y>=l.length&&(u=!0),y>l.length||++y},function(){console.error("Failed to load toast messages.");u=!0;return!1})}function k(){c.addEventListener("click",function(c){Antavo.DOM.closest(c.target,".antavo-poll-toast-link")&&b()})}function f(){if(Antavo.SDK.getBrandId())if(Antavo.SDK.getExtensionInfo("toast")&&Antavo.SDK.getCustomerId()){z=Antavo.SDK.getApiHost()+"/customers/"+Antavo.SDK.getCustomerId()+"/messages?api_key="+Antavo.SDK.getAPIKey();var b=Antavo.SDK.getExtensionInfo("toast");
if(b&&b.hasOwnProperty("style")){var h=c.createElement("link"),n=c.getElementsByTagName("title")[0];h.setAttribute("href",b.style);h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");n.parentNode.insertBefore(h,n)}k();e()}else return u=!0,!1;else setTimeout(f,500)}var l=[6E4,12E4,3E5],z,w=[],y=0,u=!1,n=!1,q={};q.init=f;q.show=m;q.hide=b;Antavo.PollToast=q})(document);Antavo=window.Antavo||{};
Antavo.ReviewHelper=function(c){function r(){var b=window.location.hash.substr(1),c=document.querySelector('[data-antavo-review-thread-container], [class*="antavo-review-thread-container-"]');-1<b.indexOf("!submitReview")&&(c&&-1==c.src.indexOf("/create")?c.src=c.src.replace("?","/create?"):setTimeout(function(){r()},500))}function m(c){if(Antavo.SDK.getBrandId()){if(0<c.length){for(var e="?items=",f=0;f<c.length;f++)e+=c[f]+",";Antavo.AJAX.get(Antavo.SDK.getReviewsUrl()+"/items/"+e,function(e){for(var f=
0;f<e.length;f++)b(e[f].id.toString(),e[f].rating.toString(),!0);for(e=0;e<c.length;e++)b(c[e].toString(),0,!1)})}}else setTimeout(function(){m(c)},500)}function b(b,c,e){var f=document.createElement("IMG"),h=w.indexOf(b);f.src=Antavo.SDK.getCDNUrl()+"/img/reviews/rating/"+parseInt(Math.round(c))+".png";document.querySelector('[data-arw-item="'+b+'"]').appendChild(f);e&&w.splice(h,1)}function h(b,c,e){if(!(0>e)){var f=(c-b.scrollTop)/e*10,n="undefined"!==typeof InstallTrigger;Antavo.isIE()||n?setTimeout(function(){document.documentElement.scrollTop=
b.scrollTop+f;document.documentElement.scrollTop!=c&&h(document.documentElement,c,e-10)},10):setTimeout(function(){b.scrollTop+=f;b.scrollTop!=c&&h(b,c,e-10)},10)}}function e(b){if(Antavo.SDK.getBrandId()){if(b.querySelector("iframe")||"IFRAME"==b.nodeName){var c="IFRAME"==b.nodeName?b:b.querySelector("iframe");c.style.width="100%";c.style.height="200";c.style.border="none";c.style.overflow="hidden";c.setAttribute("scrolling","no")}else{c=document.createElement("iframe");var f=b.getAttribute("data-ar-item-id"),
k=b.hasAttribute("data-ar-customer-id")?b.getAttribute("data-ar-customer-id"):!1,t=b.getAttribute("data-ar-item-url");c.src=k?Antavo.SDK.getReviewsUrl()+"/items/"+f+"/thread?item_url="+t+"&customer="+k:Antavo.SDK.getReviewsUrl()+"/items/"+f+"/thread?item_url="+t;c.className="antavo-review-thread-container-"+f;c.style.width="100%";c.style.height="200";c.style.border="none";c.style.overflow="hidden";c.setAttribute("scrolling","no");b.appendChild(c)}l=new Talker(c.contentWindow,"*");l.onMessage=function(b){"antavoReviewFrame"===
b.namespace&&(null!=c.offsetParent&&b.data.height&&(c.style.height=b.data.height+"px"),b.data.scrollToTop&&!z&&h(document.body,document.querySelector('[class*="antavo-review-thread-container-"], [data-antavo-review-thread-container], [data-ar-item-id]').offsetParent.offsetTop,600))}}else setTimeout(function(){e(b)},500)}var k,f,l=null,z=!1,w=[];document.addEventListener("antavo_sdk_init_finished",function(){k=document.querySelectorAll("[data-ar-item-id]");f=document.querySelectorAll("[data-arw-item]");
for(var b=0;b<k.length;b++)e(k[b]);for(b=0;b<f.length;b++){var c=f[b],h=c.getAttribute("data-arw-item");c.hasAttribute("data-arw-mode")&&c.getAttribute("data-arw-mode");w.push(h)}m(w);r()});window.addEventListener("beforeunload",function(){z=!0});window.onhashchange=r}(Antavo);Antavo=window.Antavo||{};
Antavo.Widget=function(c){function r(){if(H)return E.style.display="",E.classList.remove("top-right","bottom-right","bottom-left","top-left","sticky","filled"),E.removeAttribute("hidden"),E.classList.add(F.alignment),F.attached&&(E.classList.add("sticky"),!1===F.on_hover&&(E.classList.add("filled"),E.classList.remove("always-on"))),!0;setTimeout(function(){r()},500)}function m(){return{horizontal:F.alignment.substr(F.alignment.indexOf("-")+1),vertical:F.alignment.substr(0,F.alignment.indexOf("-"))}}
function b(a){var b=a&&P.test(a),c=a?a:F.url,e=z(),g=Antavo.isMobile().any();P.lastIndex=0;if(b||"undefined"===typeof a)if(e.src!=c)e.src=c;else{e.classList.add("open");e.classList.add(m().horizontal);return}else if(e.src!=l(c))e.src=l(c);else{e.classList.add("open");e.classList.add(m().horizontal);return}e.onload=function(){this.classList.add("open");this.classList.add(m().horizontal);U=new Talker(e.contentWindow,"*");U.onMessage=function(a){if("antavoWidgetFrame"===a.namespace){"close"==a.data.command&&
f();"set-cookie"==a.data.command&&Antavo.SDK.setOptinCookie(a.data.href);if("unset-cookie"==a.data.command){var b=Antavo.Cookie.get("__alo");b&&(Antavo.Cookie.expire("__alo",b,"/",Antavo.SDK.getTopDomain()),U.send("antavoWidgetFrame",{command:"reload-frame"}))}"failure"==a.data.command&&y("WAIT",[a.data.points,a.data.cooldown]);"success"==a.data.command&&y("CONGRATS",[a.data.points])}};null!==g&&"undefined"!==typeof g&&this.contentDocument.body.classList.add("mobile");"top-left"!==F.alignment&&"bottom-left"!==
F.alignment||this.contentDocument.body.classList.add("left");this.onload=null};d=!0}function h(){return-1<location.hostname.indexOf(".co.uk")?location.hostname.split(".").slice(-3).join("."):location.hostname.split(".").slice(-2).join(".")}function e(){!(Antavo.SDK.getCustomer()||F.display&&parseInt(100/F.frequency)>=Math.floor(100*Math.random())+1)||a||g||C||(C=!0,Antavo.AJAX.get(F.url+"/rewards/recommended",function(a){F.display&&"object"===typeof a&&a.hasOwnProperty("id")&&(k(a.id),y("REWARD",
[a]),E.onclick=function(a){a.preventDefault();a.stopPropagation();a.stopImmediatePropagation();a.canceled=!0;b(F.url)})},function(a){console.error(a)}))}function k(a){var b=Antavo.Cookie.get("__awp");b&&Antavo.Cookie.expire("__awp",b,"/",h());Antavo.Cookie.set("__awp",a,2629743,"/",h())}function f(){d=!1;z().classList.remove("open")}function l(a){return S.hasOwnProperty(a)?S[a]:!1}function z(a){a=a?a:window.parent;if(a.document.getElementById(N.widgetFrame))a=a.document.getElementById(N.widgetFrame);
else{a=window.parent.document;var b=a.createElement("IFRAME");b.setAttribute("id",N.widgetFrame);b.classList.add(m().horizontal);a=a.body.appendChild(b)}return a}function w(a){if(a.hasOwnProperty("status")&&("opted_out"==a.status||"banned"==a.status)||Antavo.isMobile().any())return!1;if(Antavo.SDK.getBrandUrl()){if(E.setAttribute("customer",a.handler?a.handler:a.first_name?a.first_name:"Anonymous"),a.image_url&&(document.getElementById("antavo-widget-customer-avatar").style.backgroundImage="url("+
a.image_url+")"),Antavo.SDK.getOption("widget","enabled"),Antavo.SDK.isWidgetEnabled()&&!g&&e(),Antavo.SDK.getOption("widget","quiz")&&!B){var d=new Antavo.URL(window.parent.location.href),c=1==(new Antavo.URL(window.parent.location.href)).params.__al;B=!0;d.hash=null;d.port=null;delete d.params.__al;delete d.params.__s;E.onclick=null;Antavo.AJAX.get(Antavo.SDK.getAPIUrl()+"/"+Antavo.SDK.getCustomerId()+"/visit/"+encodeURIComponent(d.toString())+"?api_key="+Antavo.SDK.getAPIKey(),function(a){if(a.hasOwnProperty("quiz")){if(a.quiz.hasOwnProperty("url")&&
null!==a.quiz.url)g=!0;else return!1;F.display=!1;c||Antavo.SDK.send("visit",{url:window.parent.location.href});if(null===a.quiz.is_correct)y("POINTS_AVAILABLE",[a.quiz.points]),L=a.quiz.url,E.onclick=function(){b(L)};else if(!a.quiz.is_correct){var d=new Date;a.quiz.hasOwnProperty("answer_in")?1E3*a.quiz.answer_in>d.getTime()&&(y("WAIT",[a.quiz.points,a.quiz.answer_in]),L=a.quiz.url,E.onclick=function(a){a.preventDefault();a.stopPropagation();a.stopImmediatePropagation();a.canceled=!0;b(L)}):(y("POINTS_AVAILABLE",
[a.quiz.points]),L=a.quiz.url,E.onclick=function(a){a.preventDefault();a.stopPropagation();a.stopImmediatePropagation();a.canceled=!0;b(L)})}}},function(a){})}}else setTimeout(function(){w(a)},1E3)}function y(b,d){if(Antavo.isMobile().any())return!1;var c=E.querySelector(".antavo-widget-tooltip");v=!0;E.className="show";r();E.querySelector("antavo-widget-tooltip")&&E.removeChild(E.querySelector(".antavo-widget-tooltip"));switch(b){case "CONGRATS":E.classList.add("announce");c&&E.removeChild(c);M.innerHTML=
"";M.appendChild(Antavo.DOM.fromString('<div class="points-available">'+t(d[0])+"</div>"));break;case "POINTS_AVAILABLE":E.classList.add("announce");c&&E.removeChild(c);M.innerHTML="";M.appendChild(Antavo.DOM.fromString('<div class="points-available">'+q(d[0])+"</div>"));M.appendChild(A(d[0]));break;case "WAIT":E.classList.add("announce");M.innerHTML="";M.appendChild(Antavo.DOM.fromString('<div class="counter">'+Antavo.SDK.getKey("aw_cq_play_again")+'<span id="antavo-widget-counter"></span><em>'+
Antavo.SDK.getKey("aw_cq_play_again_postfix")+"</em></div>"));u(d[1]);M.appendChild(A(d[0]));break;case "REWARD":var e=d[0],f=e.small_image?e.small_image:e.image_url?e.image_url:Antavo.SDK.getCDNUrl()+"/img/loyalty/rewards/"+e.type+".svg";E.classList.add("announce","reward");g||(a=!0,!1!==F.on_hover||F.attached||E.classList.add("always-on"),c&&E.removeChild(c),E.appendChild(Antavo.DOM.fromString('<div class="antavo-widget-tooltip">'+e.name+"</div>")),M.innerHTML="",M.appendChild(Antavo.DOM.fromString('<div class="antavo-widget-graphics" style="background-image:url(\''+
f+"')\">")))}}function u(a){var b=countdown(new Date,1E3*a,countdown.DAYS|countdown.HOURS|countdown.MINUTES|countdown.SECONDS),d="";b.days&&(d+=1<b.days+b.days?"days ":"day ");document.getElementById("antavo-widget-counter").innerHTML=d+""+n(b.hours,2)+":"+n(b.minutes,2)+":"+n(b.seconds,2);requestAnimationFrame(function(){u(a)})}function n(a,b){var d="000000000"+a;return d.substr(d.length-b)}function q(a){return Antavo.SDK.getKey("aw_cq_get_x_points").replace(/(%s)/gmi,a)}function t(a){return Antavo.SDK.getKey("aw_cq_congrats_got_points").replace(/(%s)/gmi,
a)}function A(a){var b=document.createElement("canvas"),d=b.getContext("2d"),c=[12,10,32,14,16,22,48,13,24,15,9];b.width=70;b.height=70;for(var e=0;40>e;e++)d.font=c[Math.round(10*Math.random())]+"px Arial Black",d.fillStyle="rgba(255,255,255,"+Math.random().toFixed(2)+")",d.fillText(a,Math.floor(80*Math.random())+0,Math.floor(80*Math.random())+0);return b}var H=!1,B=!1,C=!1,D=!1,a=!1,d=!1,v=!1,g=!1,L,U,F={alignment:"top-right",chance:5,frequency:2,on_hover:!0},E,M,S={start:"http://apps-bugfix.antavo.local/quizzes/26206/activities/560a801b693f8b04388b4568"},
N={widgetFrame:"antavo-widget-frame"},P=RegExp("http(s?)://","gi");(function(){document.addEventListener("click",function(a){Antavo.DOM.closest(a.target,"[data-opt-in]")&&(a.preventDefault(),Antavo.SDK.setOptinCookie())})})();return{isWidgetShowing:function(){return v?m():!1},isSidebarOpen:function(){return d},setTemplate:function(a){document.getElementsByTagName("body")[0].appendChild(Antavo.DOM.fromString(a));E=document.getElementById("antavo-widget");M=document.getElementById("antavo-widget-inner");
H=!0;Antavo.SDK.sendInitEvent();return document.getElementById("antavo-widget")},setStyle:function(a){var b=document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css";d.textContent=a;b.appendChild(d)},update:w,openSidebar:b,closeSidebar:f,setOptions:function(a){return F=a},getOptions:function(){return F},positionWidget:r,storeLotteryResult:function(){if(D)return!0;D=!0;if(!Antavo.Cookie.get("__awd")){console.info("No previous result found, getting a new one.");var a=
F.chance>=Math.floor(100*Math.random())+1;Antavo.Cookie.set("__awd",a?1:0,2629743,"/",h());F.display=a;console.info("And the result is:",F.display);(F.display||Antavo.SDK.getCustomer())&&e();return!!F.display}console.info("Found previous result, getting the cookie...");F.display=!!parseInt(Antavo.Cookie.get("__awd"));console.info("And the result is:",F.display);(F.display||Antavo.SDK.getCustomer())&&e();return!!F.display},events:{},announce:y,isReady:function(){return H}}}(Antavo);
(function(){var c=function(){function b(b){"undefined"!=typeof setImmediate?setImmediate(b):"undefined"!=typeof process&&process.nextTick?process.nextTick(b):setTimeout(b,0)}return function e(){var c,f=[],l=[],m=function(e,k){return null==c&&null!=e&&(c=e,f=k,l.length&&b(function(){for(var b=0;l.length>b;b++)l[b]()})),c};return m.then=function(k,m){var z=e(),n=function(){function b(c){var e,f=0;try{if(!c||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof(e=c.then))z(!0,arguments);else{if(c===
z)throw new TypeError;e.call(c,function(){f++||b.apply(void 0,arguments)},function(b){f++||z(!1,[b])})}}catch(C){f++||z(!1,[C])}}try{var e=c?k:m;"function"==typeof e?b(e.apply(void 0,f||[])):z(c,f)}catch(A){z(!1,[A])}};return null!=c?b(n):l.push(n),z},m}}(),r=function(b){function c(){}return c.prototype=b,new c},m=function(b,h){this.remoteWindow=b;this.remoteOrigin=h;this.timeout=3E3;this.handshaken=!1;this.handshake=c();this._id=0;this._queue=[];this._sent={};var e=this;return window.addEventListener("message",
function(b){e._receiveMessage(b)},!1),this._sendHandshake(),this};m.prototype.send=function(b,h,e){b=new m.OutgoingMessage(this,b,h,e);var k=c();return this._sent[b.id]=k,this._queue.push(b),this._flushQueue(),setTimeout(function(){k(!1,[Error("timeout")])},this.timeout),k};m.prototype._receiveMessage=function(b){var c;try{var e=JSON.parse(b.data)}catch(k){e={}}return this._isSafeMessage(b.source,b.origin,e.type)?(c=e.handshake||e.handshakeConfirmation,c?this._handleHandshake(e):this._handleMessage(e)):
!1};m.prototype._isSafeMessage=function(b,c,e){var h,f,l;return h=b===this.remoteWindow,f="*"===this.remoteOrigin||c===this.remoteOrigin,l="application/x-talkerjs-v1+json"===e,h&&f&&l};m.prototype._handleHandshake=function(b){b.handshake&&this._sendHandshake(this.handshaken);this.handshaken=!0;this.handshake(!0,[this.handshaken]);this._flushQueue()};m.prototype._handleMessage=function(b){var c=new m.IncomingMessage(this,b.namespace,b.data,b.id);return(b=b.responseToId)?this._respondToMessage(b,c):
this._broadcastMessage(c)};m.prototype._respondToMessage=function(b,c){this._sent[b]&&(this._sent[b](!0,[c]),delete this._sent[b])};m.prototype._broadcastMessage=function(b){this.onMessage&&this.onMessage.call(this,b)};m.prototype._sendHandshake=function(b){var c={type:"application/x-talkerjs-v1+json"};c[b?"handshakeConfirmation":"handshake"]=!0;this._postMessage(c)};m.prototype._nextId=function(){return this._id+=1};m.prototype._postMessage=function(b){this.remoteWindow&&this.remoteOrigin&&this.remoteWindow.postMessage(JSON.stringify(b),
this.remoteOrigin)};m.prototype._flushQueue=function(){if(this.handshaken){var b=this._queue.shift();if(!b)return this._queue;if(this._postMessage(b),0<this._queue.length)return this._flushQueue()}return this._queue};m.Message=function(b,c,e){return this.talker=b,this.namespace=c,this.data=e,this.type="application/x-talkerjs-v1+json",this};m.OutgoingMessage=function(b,c,e,k){m.Message.call(this,b,c,e);this.responseToId=k||null;this.id=this.talker._nextId()};m.OutgoingMessage.prototype=r(m.Message.prototype);
m.OutgoingMessage.prototype.constructor=m.Message;m.OutgoingMessage.prototype.toJSON=function(){return{id:this.id,responseToId:this.responseToId,namespace:this.namespace,data:this.data,type:this.type}};m.IncomingMessage=function(b,c,e,k){m.Message.call(this,b,c,e);this.id=k};m.IncomingMessage.prototype=r(m.Message.prototype);m.IncomingMessage.prototype.constructor=m.Message;m.IncomingMessage.prototype.respond=function(b){return this.talker.send(null,b,this.id)};window.Talker=m})();
var module,countdown=function(c){function r(a,b){var d=a.getTime();a.setMonth(a.getMonth()+b);return Math.round((a.getTime()-d)/864E5)}function m(a){var b=a.getTime(),c=new Date(b);c.setMonth(a.getMonth()+1);return Math.round((c.getTime()-b)/864E5)}function b(a,b){b=b instanceof Date||null!==b&&isFinite(b)?new Date(+b):new Date;if(!a)return b;var d=+a.value||0;if(d)return b.setTime(b.getTime()+d),b;(d=+a.milliseconds||0)&&b.setMilliseconds(b.getMilliseconds()+d);(d=+a.seconds||0)&&b.setSeconds(b.getSeconds()+
d);(d=+a.minutes||0)&&b.setMinutes(b.getMinutes()+d);(d=+a.hours||0)&&b.setHours(b.getHours()+d);(d=+a.weeks||0)&&(d*=7);(d+=+a.days||0)&&b.setDate(b.getDate()+d);(d=+a.months||0)&&b.setMonth(b.getMonth()+d);(d=+a.millennia||0)&&(d*=10);(d+=+a.centuries||0)&&(d*=10);(d+=+a.decades||0)&&(d*=10);(d+=+a.years||0)&&b.setFullYear(b.getFullYear()+d);return b}function h(a,b){return H(a)+(1===a?y[b]:u[b])}function e(){}function k(a,b,c,e,f,h){0<=a[c]&&(b+=a[c],delete a[c]);b/=f;if(1>=b+1)return 0;if(0<=a[e]){a[e]=
+(a[e]+b).toFixed(h);switch(e){case "seconds":if(60!==a.seconds||isNaN(a.minutes))break;a.minutes++;a.seconds=0;case "minutes":if(60!==a.minutes||isNaN(a.hours))break;a.hours++;a.minutes=0;case "hours":if(24!==a.hours||isNaN(a.days))break;a.days++;a.hours=0;case "days":if(7!==a.days||isNaN(a.weeks))break;a.weeks++;a.days=0;case "weeks":if(a.weeks!==m(a.refMonth)/7||isNaN(a.months))break;a.months++;a.weeks=0;case "months":if(12!==a.months||isNaN(a.years))break;a.years++;a.months=0;case "years":if(10!==
a.years||isNaN(a.decades))break;a.decades++;a.years=0;case "decades":if(10!==a.decades||isNaN(a.centuries))break;a.centuries++;a.decades=0;case "centuries":10!==a.centuries||isNaN(a.millennia)||(a.millennia++,a.centuries=0)}return 0}return b}function f(a,b,c,e,f,h){var d=new Date;a.start=b=b||d;a.end=c=c||d;a.units=e;a.value=c.getTime()-b.getTime();0>a.value&&(d=c,c=b,b=d);a.refMonth=new Date(b.getFullYear(),b.getMonth(),15,12,0,0);try{a.millennia=0;a.centuries=0;a.decades=0;a.years=c.getFullYear()-
b.getFullYear();a.months=c.getMonth()-b.getMonth();a.weeks=0;a.days=c.getDate()-b.getDate();a.hours=c.getHours()-b.getHours();a.minutes=c.getMinutes()-b.getMinutes();a.seconds=c.getSeconds()-b.getSeconds();a.milliseconds=c.getMilliseconds()-b.getMilliseconds();var g;0>a.milliseconds?(g=z(-a.milliseconds/1E3),a.seconds-=g,a.milliseconds+=1E3*g):1E3<=a.milliseconds&&(a.seconds+=w(a.milliseconds/1E3),a.milliseconds%=1E3);0>a.seconds?(g=z(-a.seconds/60),a.minutes-=g,a.seconds+=60*g):60<=a.seconds&&(a.minutes+=
w(a.seconds/60),a.seconds%=60);0>a.minutes?(g=z(-a.minutes/60),a.hours-=g,a.minutes+=60*g):60<=a.minutes&&(a.hours+=w(a.minutes/60),a.minutes%=60);for(0>a.hours?(g=z(-a.hours/24),a.days-=g,a.hours+=24*g):24<=a.hours&&(a.days+=w(a.hours/24),a.hours%=24);0>a.days;)a.months--,a.days+=r(a.refMonth,1);7<=a.days&&(a.weeks+=w(a.days/7),a.days%=7);0>a.months?(g=z(-a.months/12),a.years-=g,a.months+=12*g):12<=a.months&&(a.years+=w(a.months/12),a.months%=12);10<=a.years&&(a.decades+=w(a.years/10),a.years%=10,
10<=a.decades&&(a.centuries+=w(a.decades/10),a.decades%=10,10<=a.centuries&&(a.millennia+=w(a.centuries/10),a.centuries%=10)));b=0;!(e&1024)||b>=f?(a.centuries+=10*a.millennia,delete a.millennia):a.millennia&&b++;!(e&512)||b>=f?(a.decades+=10*a.centuries,delete a.centuries):a.centuries&&b++;!(e&256)||b>=f?(a.years+=10*a.decades,delete a.decades):a.decades&&b++;!(e&128)||b>=f?(a.months+=12*a.years,delete a.years):a.years&&b++;!(e&64)||b>=f?(a.months&&(a.days+=r(a.refMonth,a.months)),delete a.months,
7<=a.days&&(a.weeks+=w(a.days/7),a.days%=7)):a.months&&b++;!(e&32)||b>=f?(a.days+=7*a.weeks,delete a.weeks):a.weeks&&b++;!(e&16)||b>=f?(a.hours+=24*a.days,delete a.days):a.days&&b++;!(e&8)||b>=f?(a.minutes+=60*a.hours,delete a.hours):a.hours&&b++;!(e&4)||b>=f?(a.seconds+=60*a.minutes,delete a.minutes):a.minutes&&b++;!(e&2)||b>=f?(a.milliseconds+=1E3*a.seconds,delete a.seconds):a.seconds&&b++;if(!(e&1)||b>=f){var n=k(a,0,"milliseconds","seconds",1E3,h);if(n&&(n=k(a,n,"seconds","minutes",60,h))&&(n=
k(a,n,"minutes","hours",60,h))&&(n=k(a,n,"hours","days",24,h))&&(n=k(a,n,"days","weeks",7,h))&&(n=k(a,n,"weeks","months",m(a.refMonth)/7,h))){e=n;var l=a.refMonth,q=l.getTime(),t=new Date(q);t.setFullYear(l.getFullYear()+1);var v=Math.round((t.getTime()-q)/864E5);if((n=k(a,e,"months","years",v/m(a.refMonth),h))&&(n=k(a,n,"years","decades",10,h))&&(n=k(a,n,"decades","centuries",10,h))&&k(a,n,"centuries","millennia",10,h))throw Error("Fractional unit overflow");}}}finally{delete a.refMonth}return a}
function l(a,c,h,g,n){var d;h=+h||222;g=0<g?g:NaN;n=0<n?20>n?Math.round(n):20:0;var l=null;"function"===typeof a?(d=a,a=null):a instanceof Date||(null!==a&&isFinite(a)?a=new Date(+a):("object"===typeof l&&(l=a),a=null));var q=null;"function"===typeof c?(d=c,c=null):c instanceof Date||(null!==c&&isFinite(c)?c=new Date(+c):("object"===typeof c&&(q=c),c=null));l&&(a=b(l,c));q&&(c=b(q,a));if(!a&&!c)return new e;if(!d)return f(new e,a,c,h,g,n);l=h&1?1E3/30:h&2?1E3:h&4?6E4:h&8?36E5:h&16?864E5:6048E5;var t;
q=function(){d(f(new e,a,c,h,g,n),t)};q();return t=setInterval(q,l)}var z=Math.ceil,w=Math.floor,y,u,n,q,t,A,H;e.prototype.toString=function(a){var b=B(this),c=b.length;if(!c)return a?""+a:t;if(1===c)return b[0];a=n+b.pop();return b.join(q)+a};e.prototype.toHTML=function(a,b){a=a||"span";var c=B(this),d=c.length;if(!d)return(b=b||t)?"<"+a+">"+b+"</"+a+">":b;for(var e=0;e<d;e++)c[e]="<"+a+">"+c[e]+"</"+a+">";if(1===d)return c[0];d=n+c.pop();return c.join(q)+d};e.prototype.addTo=function(a){return b(this,
a)};var B=function(a){var b=[],c=a.millennia;c&&b.push(A(c,10));(c=a.centuries)&&b.push(A(c,9));(c=a.decades)&&b.push(A(c,8));(c=a.years)&&b.push(A(c,7));(c=a.months)&&b.push(A(c,6));(c=a.weeks)&&b.push(A(c,5));(c=a.days)&&b.push(A(c,4));(c=a.hours)&&b.push(A(c,3));(c=a.minutes)&&b.push(A(c,2));(c=a.seconds)&&b.push(A(c,1));(c=a.milliseconds)&&b.push(A(c,0));return b};l.MILLISECONDS=1;l.SECONDS=2;l.MINUTES=4;l.HOURS=8;l.DAYS=16;l.WEEKS=32;l.MONTHS=64;l.YEARS=128;l.DECADES=256;l.CENTURIES=512;l.MILLENNIA=
1024;l.DEFAULTS=222;l.ALL=2047;var C=l.setFormat=function(a){if(a){if("singular"in a||"plural"in a){var b=a.singular||[];b.split&&(b=b.split("|"));var c=a.plural||[];c.split&&(c=c.split("|"));for(var e=0;10>=e;e++)y[e]=b[e]||y[e],u[e]=c[e]||u[e]}"string"===typeof a.last&&(n=a.last);"string"===typeof a.delim&&(q=a.delim);"string"===typeof a.empty&&(t=a.empty);"function"===typeof a.formatNumber&&(H=a.formatNumber);"function"===typeof a.formatter&&(A=a.formatter)}},D=l.resetFormat=function(){y=" millisecond; second; minute; hour; day; week; month; year; decade; century; millennium".split(";");
u=" milliseconds; seconds; minutes; hours; days; weeks; months; years; decades; centuries; millennia".split(";");n=" and ";q=", ";t="";H=function(a){return a};A=h};l.setLabels=function(a,b,c,e,f,h,n){C({singular:a,plural:b,last:c,delim:e,empty:f,formatNumber:h,formatter:n})};l.resetLabels=D;D();c&&c.exports?c.exports=l:"function"===typeof window.define&&"undefined"!==typeof window.define.amd&&window.define("countdown",[],function(){return l});return l}(module);Antavo=window.Antavo||{};
(function(c){function r(){var b=c.querySelector("[data-copy-button]");if(b){var e=c.querySelector("#"+b.getAttribute("data-copy-button"))||!1;e&&b.addEventListener("click",function(){h(e,b)})}}function m(){if(Antavo&&Antavo.SDK&&Antavo.SDK.getBrandId()){var f=c.querySelector('iframe[src*="'+Antavo.SDK.getBrandUrl().replace(/http[s]*:\/\//gm,"")+'"]:not([src*="/share/"]):not([src*="/referral/"])')||c.querySelector("#loyalty-center-frame"),h=f&&f.getAttribute("src");if(f){if(window.performance&&window.performance.navigation.type===
window.performance.navigation.TYPE_BACK_FORWARD)try{f.contentWindow.location.reload(!0)}catch(z){f.setAttribute("src",""),f.setAttribute("src",h)}e=new Talker(f.contentWindow,"*");f.onload=function(){e.send("antavoLoyaltyCenter",{command:"content-loaded",mobile:!!Antavo.isMobile().any()})};c.addEventListener("antavo_sdk_init_finished",function(){e.send("antavoLoyaltyCenter",{command:"content-loaded",mobile:!!Antavo.isMobile().any()})});e.onMessage=function(b){if("antavoLoyaltyCenter"===b.namespace)if("resize-frame"===
b.data.command)null!=f.offsetParent&&b.data.height&&(480<b.data.height?(f.style.height=b.data.height+"px",b.data.selector&&c.querySelector(b.data.selector)&&(c.querySelector(b.data.selector).style.height=b.data.height+"px")):f.style.height="480px"),null!=f.offsetParent&&b.data.width&&(f.style.width="100%");else if("open-social-share"===b.data.command)Antavo.Popup.display(b.data.url);else if("open-raf-share"===b.data.command){var h=Antavo.SDK.getExtensionInfo("socialshare")?Antavo.SDK.getExtensionInfo("socialshare").url:
Antavo.SDK.getExtensionInfo("friendreferral").share_url;"facebook"===b.data.network?FB.ui({method:"share",href:b.data.url,display:"iframe"},function(c){c&&(Antavo.SDK.send("share",{network:"facebook",url:b.data.url}),Antavo.Popup.display(Antavo.Popup.getShareUrl(Antavo.SDK.getBrandUrl())+"/success"))}):Antavo.Popup.display(h+"/"+b.data.network+"/referral?url="+b.data.url)}else if("open-video"===b.data.command)(h=b.data.video)&&void 0!=h&&Antavo.Video.openVideo(h);else if("get-variable"===b.data.command)e.send("antavoLoyaltyCenter",
{command:"send-variable",variable:window[b.data.variable]});else if("where-am-i"===b.data.command)e.send("antavoLoyaltyCenter",{command:"you-are-here",position:f.getBoundingClientRect()});else if("scotty-beam-me-up"===b.data.command)h=b.data.offset||0,window.jQuery?jQuery("html, body").stop().animate({scrollTop:jQuery(f).offset().top+h},1E3):console.warn("Sorry, this command needs jQuery to function");else if("inject-element"===b.data.command){h=b.data.method||"appendChild";var l=b.data.html_string,
k=c.querySelector(b.data.selector||"body");switch(h){case "appendChild":k.appendChild(Antavo.DOM.fromString(l));break;default:k.parentNode.insertBefore(Antavo.DOM.fromString(l),k)}}else"remove-element"===b.data.command&&(console.info("Got request from inner frame"),k=c.querySelector(b.data.content_selector),k.parentNode.removeChild(k))}}r();b()}else setTimeout(function(){m()},1E3)}function b(){var b=Antavo.Automation.getStoredURL();if(b&&"undefined"!=typeof b&&(b=new Antavo.URL(b),b.params.lc_url&&
(b=decodeURIComponent(b.params.lc_url))&&"undefined"!=typeof b&&b.length)){var e=c.querySelector("#loyalty-center-frame");e&&(e.src=b)}}function h(b,e){if(c.queryCommandSupported("copy")&&b){b.select();try{var f=c.execCommand("copy");b.blur();e&&f?e.innerHTML="Copied":e&&(e.innerHTML="please press Ctrl/Cmd+C to copy")}catch(w){e&&(e.innerHTML="please press Ctrl/Cmd+C to copy")}}}var e,k={};m();k.init=m;k.copyToClipboard=h;k.submitForm=function(b){console.info("Got the form ID:",b);e&&e.send("antavoLoyaltyCenter",
{command:"submit-form",form_submit:b})};Antavo.LoyaltyCenter=k})(document);Antavo=window.Antavo||{};
(function(c){function r(c,f){var h=[],n=0;[].forEach.call(c,function(c){var k=(b(c,f)*(z/100)*c.value).toFixed();h.push(e(c.value,b(c,f)));n+=Number(k)});h.push(e(n,1,100));return h}function m(b){try{return JSON.parse(b)}catch(q){return!1}}function b(b,c){for(var e=0;e<c.length;e++){var f=c[e];if(h(b[f.property],f.operator,f.value))return c[e].multiplier}return 1}function h(b,c,e){switch(c){case "start":return!!b.match("^("+e+")");case "not_start":return!b.match("^("+e+")");case "end":return!!b.match("("+
e+"$)");case "not_end":return!b.match("("+e+"$)");case "contain":return-1!=b.indexOf(e);case "not_contain":return-1==b.indexOf(e);case "equal":return b===e;case "not_equal":return b!==e;case "less":return b<e;case "not_greater":return b<=e;case "greater":return b>e;case "not_less":return b>=e;case "between":return b>=e[0]&&b<=e[1];case "exists":return null!=b&&"undefined"!=typeof b&&""!=b;case "not_exists":return!(null!=b&&"undefined"!=typeof b&&""!=b);default:console.error("Unsupported operator type:"+
c)}}function e(b,c,e){c=c||1;e=e||z;l||(l=Antavo.SDK.getKey("lc_aip_inner_content"));return l.replace(/%d/g,(e/100*c*b).toFixed())}function k(){for(var f=c.querySelectorAll(".aip-point-display"),h=0;h<f.length;h++)f[h].hasAttribute("data-aip-properties")?y.addSnippets({elem:f[h],points:f[h].getAttribute("data-aip-value"),properties:m(f[h].getAttribute("data-aip-properties"))}):y.addSnippets({elem:f[h],points:f[h].getAttribute("data-aip-value")});f=y.getSnippets();var k;for(h=0;h<f.length;h++){var l=
f[h].elem,r=1;try{r=l.getAttribute("data-aip-value")}catch(C){}l.hasAttribute("data-aip-summary")||(l.hasAttribute("data-aip-properties")&&(k=m(l.getAttribute("data-aip-properties")))?(r=k.value||r,l.innerHTML=e(r,b(k,w))):l.innerHTML=e(r))}k=y.getSnippets();f={};for(h=0;h<k.length;h++)k[h].hasOwnProperty("properties")&&k[h].properties.hasOwnProperty("group")&&(l=k[h].properties,f[l.group]=f[l.group]?f[l.group]:0,f[l.group]+=parseInt(l.value));for(var u in f)for(h=0;h<k.length;h++)k[h].elem.hasAttribute("data-aip-summary")&&
k[h].elem.getAttribute("data-aip-summary")==u&&(k[h].elem.innerHTML=e(f[u],1,100))}function f(){if(Antavo.SDK.getBrandId()){if(Antavo.SDK.getExtensionInfo("incentivizedpurchase")){l=Antavo.SDK.getKey("lc_aip_inner_content");z=Antavo.SDK.getExtensionInfo("incentivizedpurchase","percentage");var b=Antavo.SDK.getExtensionInfo("incentivizedpurchase","campaigns"),c=[];if(b instanceof Array&&0<b.length)for(var e=0;e<b.length;e++)c.push(b[e]);w=c;k()}}else window.setTimeout(f,1E3)}var l="",z,w=[],y={snippets:[],
getSnippets:function(){return this.snippets},addSnippets:function(b){this.snippets.push(b)}},u={};u.init=f;u.reflow=k;u.clear=function(b){for(var c=y.getSnippets(),e;e<c.length;e++){var f=c[e].elem;f.innerHTML="";b&&null!=f.parentNode&&f.parentNode.removeChild(f)}};u.setStyle=function(b){var e=c.head,f=c.createElement("style");f.setAttribute("id","aip-custom-stylesheet");f.innerHTML=b;e.appendChild(f)};u.getPoints=function(b){return r(b,w)};Antavo.IncentivizedPurchase=u})(document);
Antavo=window.Antavo||{};
(function(c){function r(){c.addEventListener("click",function(b){Antavo.DOM.closest(b.target,"[data-open-quiz-popup]")&&(b=Antavo.DOM.closest(b.target,"[data-open-quiz-popup]"),Antavo.Popup.display(b.getAttribute("data-open-quiz-popup").toString()))})}function m(){if(Antavo.SDK.getCustomer()&&Antavo.SDK.getExtensionInfo("contentconsumption","quiz_url")){var b=Antavo.SDK.getExtensionInfo("contentconsumption");b.visit&&b.quiz_url&&c.addEventListener("scroll",function(){var f=c.documentElement.scrollTop||
c.body.scrollTop;if(!e&&f>=.5*(c.body.clientHeight-window.innerHeight)){f=b.visit;var h=b.quiz_url,k;c.querySelector(".antavo-quiz-widget")||c.getElementsByTagName("body")[0].appendChild(Antavo.DOM.fromString('<div class="antavo-quiz-widget hidden"><a href="#" data-open-quiz-popup="#"><p data-quiz-widget-text>Take the quiz</p><p data-quiz-widget-points>get 30 points</p></a></div>'));if(k=c.querySelector(".antavo-quiz-widget")){var m=k.querySelector("[data-open-quiz-popup]"),u=k.querySelector("[data-quiz-widget-text]"),
n=Antavo.SDK.getKey("lc_quiz_take_quiz")||"Take our quiz",q=Antavo.SDK.getKey("lc_quiz_get_points")||"Get %s points!",t=k.querySelector("[data-quiz-widget-points]");m&&u&&f&&(m.setAttribute("data-open-quiz-popup",h),u.innerHTML=n,t&&q.match(/%s/)&&(t.innerHTML=q.replace(/%s/,f)),k.classList.remove("hidden"),r(),e=!0)}}})}}function b(){Antavo.SDK&&Antavo.SDK.getBrandId()?Antavo.SDK.getExtensionInfo("contentconsumption")&&m():setTimeout(function(){b()},1E3)}function h(){c.addEventListener("antavo_sdk_init_finished",
function(){b()})}var e=!1;h();var k={};k.init=h;k.hide=function(){var b=c.querySelector(".antavo-quiz-widget");b&&b.classList.add("hidden")};Antavo.Quiz=k})(document);Antavo.Video.injectTemplate('<div id="tpl-remaining-box" class="remaining-box hidden" style="opacity: 0; display: none;"> <div class="remaining-box-main-block counting loggedin hidden"> \x3c!-- Logged in customer --\x3e <div class="arrow-box-left"> <span> <img id="remaining-box-image" src=""><span id="remaining-box-name"></span> </span> </div> <div class="remaining-box-counter"> <span id="remaining-time"><strong></strong> and you will get your points</span> </div> <div class="remaining-box-pointer-pentagon"> <span> <strong><span id="remaining-box-point-value">50</span></strong> <p class="remaining-box-point" id="remaining-box-point-label">kredit</p> </span> </div> </div> <div class="remaining-box-main-block counting guest hidden"> \x3c!-- Guest --\x3e <div class="remaining-box-pointer-pentagon-left"> <span> <strong> <span id="remaining-box-point-value2">50</span> </strong> <p class="remaining-box-point" id="remaining-box-point-label2"></p> </span> </div> <div class="remaining-box-counter"> <span id="remaining-time2"> <strong></strong> </span> </div> <div class="arrow-box-right"> <span> <a id="remaining-box-login-url" href=""> <strong id="remaining-box-login-link"></strong> </a> </span> </div> </div> <div class="remaining-box-main-block successfull hidden"> \x3c!-- Successfully/Already watched video --\x3e <div class="success-wrapper"> \x3c!-- Place success message here --\x3e </div> </div> </div>');
Antavo.Video.injectTemplate('<template id="tpl-video-frame"> <div id="antavo-loyalty-video-dialog"> <a data-close-video-dialog>\u00d7</a> <div class="flex-video"> {{content}} </div> </div> </template>');Antavo.Widget.setStyle("/** * Vendor prefix mixin * --- * Specify the property name (can be unqouted) and the value (quoted) * and this mixin takes care of the rest. * */ @import url(\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,700\"); .widget-body, .widget-body .widget-section, .widget-body article { margin: 0; padding: 0; height: 100%; overflow: hidden; } #antavo-widget-frame { background-color: transparent; border: 0; border-left: 0; width: 340px; height: 100%; top: 0; right: 0; position: fixed; transition: all 0.75s ease-in-out; -webkit-transform: translateX(500px); -ms-transform: translateX(500px); -moz-transform: translateX(500px); -o-transform: translateX(500px); transform: translateX(500px); will-change: transform; z-index: 2147483646; } #antavo-widget-frame.open { -webkit-transform: translateX(0); -ms-transform: translateX(0); -moz-transform: translateX(0); -o-transform: translateX(0); transform: translateX(0); } #antavo-widget-frame.open.left { left: 0; -webkit-transform: translateX(0); -ms-transform: translateX(0); -moz-transform: translateX(0); -o-transform: translateX(0); transform: translateX(0); } #antavo-widget-frame.left { right: auto; left: 0; -webkit-transform: translateX(-500px); -ms-transform: translateX(-500px); -moz-transform: translateX(-500px); -o-transform: translateX(-500px); transform: translateX(-500px); } #antavo-widget { background-size: cover; position: fixed; cursor: pointer; top: 30px; right: 46px; border: 5px solid #FFF; border-radius: 50%; box-sizing: border-box; display: block; width: 80px; height: 80px; transition: all .25s ease-in; opacity: 0; -webkit-transform: scale(0); -ms-transform: scale(0); -moz-transform: scale(0); -o-transform: scale(0); transform: scale(0); z-index: 2147483645; box-shadow: 0 5px 10px 0 rgba(0, 0, 0, 0.2); } #antavo-widget.bottom-left .antavo-widget-tooltip, #antavo-widget.top-left .antavo-widget-tooltip { left: calc(100% + 8px); right: auto; } #antavo-widget.bottom-left .antavo-widget-tooltip:after, #antavo-widget.top-left .antavo-widget-tooltip:after { right: 100%; left: auto; border-color: rgba(43, 43, 43, 0); border-right-color: #2b2b2b; } #antavo-widget.always-on.bottom-left .antavo-widget-tooltip, #antavo-widget.always-on.bottom-right .antavo-widget-tooltip { -webkit-transform: translateY(calc(-100% - 16px)) translateX(-50%); -ms-transform: translateY(calc(-100% - 16px)) translateX(-50%); -moz-transform: translateY(calc(-100% - 16px)) translateX(-50%); -o-transform: translateY(calc(-100% - 16px)) translateX(-50%); transform: translateY(calc(-100% - 16px)) translateX(-50%); top: 0; bottom: auto; } #antavo-widget.always-on .antavo-widget-tooltip { left: 50%; display: block !important; -webkit-transform: translateY(calc(100% + 16px)) translateX(-50%); -ms-transform: translateY(calc(100% + 16px)) translateX(-50%); -moz-transform: translateY(calc(100% + 16px)) translateX(-50%); -o-transform: translateY(calc(100% + 16px)) translateX(-50%); transform: translateY(calc(100% + 16px)) translateX(-50%); width: 100px; text-align: center; bottom: 0; top: auto; right: auto; } #antavo-widget.always-on .antavo-widget-tooltip:after { display: none; } #antavo-widget:hover .antavo-widget-tooltip { display: block; } #antavo-widget.reward:after { display: none; } #antavo-widget .antavo-widget-tooltip { position: absolute; display: none; width: 200px; right: 80px; background: #2b2b2b; color: #FFF; font-size: 10px; line-height: 14px; padding: 8px; top: 50%; -webkit-transform: translateY(-50%); -ms-transform: translateY(-50%); -moz-transform: translateY(-50%); -o-transform: translateY(-50%); transform: translateY(-50%); } #antavo-widget .antavo-widget-tooltip:after { left: 100%; top: 50%; border: solid transparent; content: \" \"; height: 0; width: 0; position: absolute; pointer-events: none; border-color: rgba(43, 43, 43, 0); border-left-color: #2b2b2b; border-width: 5px; margin-top: -5px; } #antavo-widget a { position: relative; width: 100%; height: 100%; display: block; } #antavo-widget:after { position: absolute; content: attr(customer); display: block; height: 16px; border-radius: 8px; background-color: #000; color: #FFF; text-align: center; font-size: 10px; font-family: Arial, Helvetica, sans-serif; box-sizing: border-box; width: auto; left: 50%; -webkit-transform: translateX(-50%); -ms-transform: translateX(-50%); -moz-transform: translateX(-50%); -o-transform: translateX(-50%); transform: translateX(-50%); text-transform: uppercase; bottom: -16px; padding-left: 12px; padding-right: 12px; max-width: 90px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } #antavo-widget.show { opacity: 1; -webkit-transform: scale(1); -ms-transform: scale(1); -moz-transform: scale(1); -o-transform: scale(1); transform: scale(1); } #antavo-widget.bottom-right { bottom: 30px; right: 46px; top: auto; } #antavo-widget.bottom-left { bottom: 30px; right: auto; left: 46px; top: auto; } #antavo-widget.top-left { top: 30px; right: auto; left: 46px; } #antavo-widget.announce { background: #f86702; background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Y4NjcwMiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmMjNjMDkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+); background: -moz-linear-gradient(top, #f86702 0%, #f23c09 100%); background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #f86702), color-stop(100%, #f23c09)); background: -webkit-linear-gradient(top, #f86702 0%, #f23c09 100%); background: -o-linear-gradient(top, #f86702 0%, #f23c09 100%); background: -ms-linear-gradient(top, #f86702 0%, #f23c09 100%); background: linear-gradient(to bottom, #f86702 0%, #f23c09 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f86702', endColorstr='#f23c09',GradientType=0 ); } #antavo-widget.announce #antavo-widget-customer-avatar { -webkit-transform: scale(0) rotate(180deg); -ms-transform: scale(0) rotate(180deg); -moz-transform: scale(0) rotate(180deg); -o-transform: scale(0) rotate(180deg); transform: scale(0) rotate(180deg); } #antavo-widget.sticky { background: #9cd5cd; border-radius: 12px; padding: 10px; height: 100px; width: 100px; border: 0; } #antavo-widget.sticky .antavo-widget-tooltip { background: #81bfb7; border-radius: 6px; } #antavo-widget.sticky .antavo-widget-tooltip:after { border-left-color: #81bfb7; } #antavo-widget.sticky.top-right, #antavo-widget.sticky.bottom-right { right: 0; border-top-right-radius: 0; border-bottom-right-radius: 0; } #antavo-widget.sticky.top-right .antavo-widget-tooltip, #antavo-widget.sticky.bottom-right .antavo-widget-tooltip { right: 110px; } #antavo-widget.sticky.top-left, #antavo-widget.sticky.bottom-left { left: 0; border-top-left-radius: 0; border-bottom-left-radius: 0; } #antavo-widget.sticky.top-left .antavo-widget-tooltip:after, #antavo-widget.sticky.bottom-left .antavo-widget-tooltip:after { border-left-color: transparent; border-right-color: #81BFB7; } #antavo-widget.sticky #antavo-widget-inner { width: 80px; height: 80px; border: 6px solid #fff; box-sizing: border-box; } #antavo-widget.sticky.filled .antavo-widget-tooltip { display: block; position: absolute; top: 100%; left: 0; width: 100%; right: 10px; word-wrap: break-word; border-top-left-radius: 0; border-top-right-radius: 0; -webkit-transform: translate( 0, 0); -ms-transform: translate( 0, 0); -moz-transform: translate( 0, 0); -o-transform: translate( 0, 0); transform: translate( 0, 0); } #antavo-widget.sticky.filled .antavo-widget-tooltip:after { content: none; } #antavo-widget.sticky.filled.top-right, #antavo-widget.sticky.filled.bottom-right { border-bottom-left-radius: 0; } #antavo-widget.sticky.filled.top-right .antavo-widget-tooltip, #antavo-widget.sticky.filled.bottom-right .antavo-widget-tooltip { left: 0; right: 0; border-bottom-right-radius: 0; } #antavo-widget.sticky.filled.top-left, #antavo-widget.sticky.filled.bottom-left { border-bottom-right-radius: 0; } #antavo-widget.sticky.filled.top-left .antavo-widget-tooltip, #antavo-widget.sticky.filled.bottom-left .antavo-widget-tooltip { right: 0; left: 0; border-bottom-left-radius: 0; } #antavo-widget-customer-avatar { background-size: cover; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 50%; -webkit-transition: all 0.75s ease-in-out; -ms-transition: all 0.75s ease-in-out; -moz-transition: all 0.75s ease-in-out; -o-transition: all 0.75s ease-in-out; transition: all 0.75s ease-in-out; } #antavo-widget-inner { width: 70px; height: 70px; border-radius: 50%; overflow: hidden; } #antavo-widget-inner .antavo-widget-graphics { width: 100%; height: 100%; background-size: cover; background-position: 50% 0; background-repeat: no-repeat; } #antavo-widget-inner .points-available, #antavo-widget-inner .counter { color: #FFF; font-size: 12px; line-height: 14px; left: 0; position: absolute; text-align: center; text-transform: uppercase; top: 50%; width: 100%; -webkit-transform: translateY(-50%); -ms-transform: translateY(-50%); -moz-transform: translateY(-50%); -o-transform: translateY(-50%); transform: translateY(-50%); } #antavo-widget-inner .points-available span, #antavo-widget-inner .counter span { display: block; font-weight: 700; font-size: 24px; line-height: 24px; } #antavo-widget-inner .points-available.counter, #antavo-widget-inner .counter.counter { font-size: 10px; line-height: 12px; top: 8px; height: 100%; -webkit-transform: translateY(0); -ms-transform: translateY(0); -moz-transform: translateY(0); -o-transform: translateY(0); transform: translateY(0); } #antavo-widget-inner .points-available.counter span, #antavo-widget-inner .counter.counter span { background: #f86702; border-radius: 12px; font-size: 16px; line-height: 16px; position: absolute; left: 50%; padding: 4px 12px; -webkit-transform: translateX(-50%); -ms-transform: translateX(-50%); -moz-transform: translateX(-50%); -o-transform: translateX(-50%); transform: translateX(-50%); white-space: nowrap; } #antavo-widget-inner .points-available.counter em, #antavo-widget-inner .counter.counter em { color: #FFF; display: inline-block; font-style: normal; position: absolute; bottom: 12px; left: 50%; -webkit-transform: translateX(-50%); -moz-transform: translateX(-50%); -ms-transform: translateX(-50%); -o-transform: translateX(-50%); transform: translateX(-50%); } #antavo-widget-inner canvas { border-radius: 50%; opacity: .3; -webkit-animation-name: spin; -ms-animation-name: spin; -moz-animation-name: spin; -o-animation-name: spin; animation-name: spin; -webkit-animation-duration: 10s; -ms-animation-duration: 10s; -moz-animation-duration: 10s; -o-animation-duration: 10s; animation-duration: 10s; -webkit-animation-fill-mode: both; -ms-animation-fill-mode: both; -moz-animation-fill-mode: both; -o-animation-fill-mode: both; animation-fill-mode: both; -webkit-animation-iteration-count: infinite; -ms-animation-iteration-count: infinite; -moz-animation-iteration-count: infinite; -o-animation-iteration-count: infinite; animation-iteration-count: infinite; } /* Animations */ @-moz-keyframes spin { from { -moz-transform: rotate(0deg); } to { -moz-transform: rotate(360deg); } } @-webkit-keyframes spin { from { -webkit-transform: rotate(0deg); } to { -webkit-transform: rotate(360deg); } } @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } } @media (max-device-width: 640px) { #antavo-widget-frame { width: 100%; } } /*# sourceMappingURL=widget.css.map */");
Antavo.Widget.setTemplate('<div style="display:none;" id="antavo-widget" customer=><a id="antavo-widget-opener"><div id="antavo-widget-inner"></div><div id="antavo-widget-customer-avatar"></div></a></div>');
